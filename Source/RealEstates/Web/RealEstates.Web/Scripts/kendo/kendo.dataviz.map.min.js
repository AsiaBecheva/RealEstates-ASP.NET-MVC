/*
* Kendo UI v2014.2.1008 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.data.min","./kendo.userevents.min","./kendo.tooltip.min","./kendo.dataviz.core.min","./kendo.mobile.scroller.min","./kendo.dataviz.drawing.min","./kendo.core.min","./kendo.draganddrop.min"],e)}(function(){return function(){function e(e){return typeof e!==L}function t(e,t){var i=n(t);return A.round(e*i)/i}function n(e){return e?A.pow(10,e):1}function i(e,t,n){return A.max(A.min(e,n),t)}function r(e){return e*M}function o(e){return e/M}function a(e){return A.round(e)+.5}function s(e){return"number"==typeof e&&!isNaN(e)}function l(t,n){return e(t)?t:n}function c(e){return e*e}function d(e){var t,n=[];for(t in e)n.push(t+e[t]);return n.sort().join("")}function h(e){var t,n=2166136261;for(t=0;e.length>t;++t)n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24),n^=e.charCodeAt(t);return n>>>0}function u(e){return h(d(e))}function f(e){var t,n=e.length,i=I,r=z;for(t=0;n>t;t++)r=A.max(r,e[t]),i=A.min(i,e[t]);return{min:i,max:r}}function p(e){return f(e).min}function g(e){return f(e).max}function m(e){return y(e).min}function v(e){return y(e).max}function y(e){var t,n,i,r=I,o=z;for(t=0,n=e.length;n>t;t++)i=e[t],null!==i&&isFinite(i)&&(r=A.min(r,i),o=A.max(o,i));return{min:r===I?void 0:r,max:o===z?void 0:o}}function _(e){return e?e[e.length-1]:void 0}function w(e,t){return e.push.apply(e,t),e}function x(t,n){return e(n)&&null!==n?" "+t+"='"+n+"' ":""}function b(e){var t,n="";for(t=0;e.length>t;t++)n+=x(e[t][0],e[t][1]);return n}function k(t){var n,i,r="";for(n=0;t.length>n;n++)i=t[n][1],e(i)&&(r+=t[n][0]+":"+i+";");return""!==r?r:void 0}function C(e){return"string"!=typeof e&&(e+="px"),e}function S(e){var t,n,i=[];if(e)for(t=D.toHyphens(e).split("-"),n=0;t.length>n;n++)i.push("k-pos-"+t[n]);return i.join(" ")}function T(){this.observer&&this.observer.geometryChange()}var A=Math,D=window.kendo,P=D.deepExtend,E=D.dataviz,M=A.PI/180,I=Number.MAX_VALUE,z=-Number.MAX_VALUE,L="undefined";P(E,{util:{MAX_NUM:I,MIN_NUM:z,mixins:{geometryChange:T},alignToPixel:a,append:w,arrayLimits:f,arrayMin:p,arrayMax:g,defined:e,deg:o,hashKey:h,hashObject:u,isNumber:s,last:_,limitValue:i,objectKey:d,round:t,rad:r,renderAttr:x,renderAllAttr:b,renderPos:S,renderSize:C,renderStyle:k,sparseArrayLimits:y,sparseArrayMin:m,sparseArrayMax:v,sqr:c,valueOrDefault:l}})}(window.kendo.jQuery),function(e,t){var n,i=Math,r=i.abs,o=i.atan,a=i.atan2,s=i.cos,l=i.max,c=i.min,d=i.sin,h=i.tan,u=window.kendo,f=u.Class,p=u.dataviz,g=u.deepExtend,m=p.util,v=m.defined,y=m.deg,_=m.rad,w=m.round,x=m.sqr,b=m.valueOrDefault,k=f.extend({init:function(e,t){1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=t)},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(e){return e&&e.lat===this.lat&&e.lng===this.lng},clone:function(){return new k(this.lat,this.lng)},round:function(e){return this.lng=w(this.lng,e),this.lat=w(this.lat,e),this},wrap:function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},distanceTo:function(e,t){return this.greatCircleTo(e,t).distance},destination:function(e,t,n){var r,o,l,c,h;return t=_(t),n=n||p.map.datums.WGS84,r=_(this.lat),o=_(this.lng),l=e/u.dataviz.map.datums.WGS84.a,c=i.asin(d(r)*s(l)+s(r)*d(l)*s(t)),h=o+a(d(t)*d(l)*s(r),s(l)-d(r)*d(c)),new k(y(c),y(h))},greatCircleTo:function(e,t){var n,l,c,u,f,g,m,v,b,C,S,T,A,D,P,E,M,I,z,L,B,R,F,O,N,H,V,U,W;if(e=k.create(e),t=t||p.map.datums.WGS84,!e||this.clone().round(8).equals(e.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(n=t.a,l=t.b,c=t.f,u=_(e.lng-this.lng),f=o((1-c)*h(_(this.lat))),g=d(f),m=s(f),v=o((1-c)*h(_(e.lat))),b=d(v),C=s(v),S=u,A=this.DISTANCE_ITERATIONS,D=!1;!D&&A-->0;)P=d(S),E=s(S),M=i.sqrt(x(C*P)+x(m*b-g*C*E)),z=g*b+m*C*E,B=a(M,z),R=m*C*P/M,I=1-x(R),L=0,0!==I&&(L=z-2*g*b/I),T=S,F=c/16*I*(4+c*(4-3*I)),S=u+(1-F)*c*R*(B+F*M*(L+F*z*(-1+2*x(L)))),D=r(S-T)<=this.DISTANCE_CONVERGENCE;return O=I*(x(n)-x(l))/x(l),N=1+O/16384*(4096+O*(-768+O*(320-175*O))),H=O/1024*(256+O*(-128+O*(74-47*O))),V=H*M*(L+H/4*(z*(-1+2*x(L))-H/6*L*(-3+4*x(M))*(-3+4*x(L)))),U=a(C*P,m*b-g*C*E),W=a(m*P,-g*C+m*b*E),{distance:w(l*N*(B-V),this.DISTANCE_PRECISION),azimuthFrom:y(U),azimuthTo:y(W)}}});k.fn.toString=function(){return u.format(this.FORMAT,this.lng,this.lat)},k.fromLngLat=function(e){return new k(e[1],e[0])},k.fromLatLng=function(e){return new k(e[0],e[1])},k.create=function(e,n){return v(e)?e instanceof k?e.clone():1===arguments.length&&2===e.length?k.fromLatLng(e):new k(e,n):t},n=f.extend({init:function(e,t){e=k.create(e),t=k.create(t),e.lng+180>t.lng+180&&t.lat+90>e.lat+90?(this.se=e,this.nw=t):(this.se=t,this.nw=e)},contains:function(e){var t=this.nw,n=this.se,i=b(e.lng,e[1]),r=b(e.lat,e[0]);return e&&i+180>=t.lng+180&&n.lng+180>=i+180&&r+90>=n.lat+90&&t.lat+90>=r+90},center:function(){var e=this.nw,t=this.se,n=e.lng+(t.lng-e.lng)/2,i=e.lat+(t.lat-e.lat)/2;return new k(i,n)},containsAny:function(e){var t,n=!1;for(t=0;e.length>t;t++)n=n||this.contains(e[t]);return n},include:function(e){var t=this.nw,n=this.se,i=b(e.lng,e[1]),r=b(e.lat,e[0]);t.lng=c(t.lng,i),t.lat=l(t.lat,r),n.lng=l(n.lng,i),n.lat=c(n.lat,r)},includeAll:function(e){for(var t=0;e.length>t;t++)this.include(e[t])},edges:function(){var e=this.nw,t=this.se;return{nw:this.nw,ne:new k(e.lat,t.lng),se:this.se,sw:new k(e.lng,t.lat)}},toArray:function(){var e=this.nw,t=this.se;return[e,new k(e.lat,t.lng),t,new k(e.lng,t.lat)]},overlaps:function(e){return this.containsAny(e.toArray())||e.containsAny(this.toArray())}}),n.World=new n([90,-180],[-90,180]),n.create=function(e,i){return e instanceof n?e:e&&i?new n(e,i):e&&4===e.length&&!i?new n([e[0],e[1]],[e[2],e[3]]):t},g(p,{map:{Extent:n,Location:k}})}(window.kendo.jQuery),function(){var e=window.kendo,t=e.ui.Widget,n=e.template,i=e.dataviz,r=i.util.valueOrDefault,o=i.util.defined,a=t.extend({init:function(e,n){t.fn.init.call(this,e,n),this._initOptions(n),this.items=[],this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(e,t){this._extent=e,this._zoom=t,this._render()},add:function(e){o(e)&&("string"==typeof e&&(e={text:e}),this.items.push(e),this._render())},remove:function(e){var t,n,i=[];for(t=0;this.items.length>t;t++)n=this.items[t],n.text!==e&&i.push(n);this.items=i,this._render()},clear:function(){this.items=[],this.element.empty()},_render:function(){var e,t,i,r=[],o=n(this.options.itemTemplate);for(e=0;this.items.length>e;e++)t=this.items[e],i=this._itemText(t),""!==i&&r.push(o({text:i}));r.length>0?this.element.empty().append(r.join(this.options.separator)).show():this.element.hide()},_itemText:function(e){var t="",n=this._inZoomLevel(e.minZoom,e.maxZoom),i=this._inArea(e.extent);return n&&i&&(t+=e.text),t},_inZoomLevel:function(e,t){var n=!0;return e=r(e,-Number.MAX_VALUE),t=r(t,Number.MAX_VALUE),n=this._zoom>e&&t>this._zoom},_inArea:function(e){var t=!0;return e&&(t=e.contains(this._extent)),t}});e.dataviz.ui.plugin(a)}(jQuery),function(e){function t(e){return n.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-{0}"/></button>',e)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=".kendoNavigator",s=t("n")+t("e")+t("s")+t("w"),l=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-header k-shadow k-navigator").append(s).on("click"+a,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(e,t){var n=this.options.panStep;this.trigger("pan",{x:e*n,y:t*n})},_click:function(t){var n=0,i=0,r=e(t.currentTarget);r.is(".k-navigator-n")?i=1:r.is(".k-navigator-s")?i=-1:r.is(".k-navigator-e")?n=1:r.is(".k-navigator-w")&&(n=-1),this._pan(n,i),t.preventDefault()},_keydown:function(e){switch(e.which){case r.UP:this._pan(0,1),e.preventDefault();break;case r.DOWN:this._pan(0,-1),e.preventDefault();break;case r.RIGHT:this._pan(1,0),e.preventDefault();break;case r.LEFT:this._pan(-1,0),e.preventDefault()}}});n.dataviz.ui.plugin(l)}(jQuery),function(e){function t(e,t){return n.format('<button class="k-button k-zoom-{0}" title="zoom-{0}">{1}</button>',e,t)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=".kendoZoomControl",s=t("in","+")+t("out","-"),l=187,c=189,d=61,h=173,u=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal").append(s).on("click"+a,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(e){var t=this.options.zoomStep;this.trigger("change",{delta:e*t})},_click:function(t){var n=e(t.currentTarget),i=1;n.is(".k-zoom-out")&&(i=-1),this._change(i),t.preventDefault()},_keydown:function(e){switch(e.which){case r.NUMPAD_PLUS:case l:case d:this._change(1);break;case r.NUMPAD_MINUS:case c:case h:this._change(-1)}}});n.dataviz.ui.plugin(u)}(jQuery),function(){var e=Math,t=e.atan,n=e.exp,i=e.pow,r=e.sin,o=e.log,a=e.tan,s=window.kendo,l=s.Class,c=s.dataviz,d=c.Matrix,h=s.deepExtend,u=c.geometry,f=u.Point,p=c.map,g=p.Location,m=c.util,v=m.rad,y=m.deg,_=m.limitValue,w=e.PI,x=w/2,b=w/4,k=w/180,C={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},S=l.extend({init:function(e){this._initOptions(e)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:C},forward:function(e,t){var n=this,i=n.options,r=i.datum,o=r.a,a=i.centralMeridian,s=_(e.lat,-n.MAX_LAT,n.MAX_LAT),l=t?_(e.lng,-n.MAX_LNG,n.MAX_LNG):e.lng,c=v(l-a)*o,d=n._projectLat(s);return new f(c,d)},_projectLat:function(e){var t=this.options.datum,n=t.e,s=t.a,l=v(e),c=a(b+l/2),d=n*r(l),h=i((1-d)/(1+d),n/2);return s*o(c*h)},inverse:function(e,t){var n=this,i=n.options,r=i.datum,o=r.a,a=i.centralMeridian,s=e.x/(k*o)+a,l=_(n._inverseY(e.y),-n.MAX_LAT,n.MAX_LAT);return t&&(s=_(s,-n.MAX_LNG,n.MAX_LNG)),new g(l,s)},_inverseY:function(o){var a,s,l,c,d=this,h=d.options.datum,u=h.a,f=h.e,p=f/2,g=n(-o/u),m=x-2*t(g);for(a=0;d.INVERSE_ITERATIONS>=a&&(s=f*r(m),l=i((1-s)/(1+s),p),c=x-2*t(g*l)-m,m+=c,!(e.abs(c)<=d.INVERSE_CONVERGENCE));a++);return y(m)}}),T=S.extend({MAX_LAT:85.0511287798,_projectLat:function(e){var t=this.options.datum.a,n=v(e),i=a(b+n/2);return t*o(i)},_inverseY:function(e){var i=this.options.datum.a,r=n(-e/i);return y(x-2*t(r))}}),A=l.extend({forward:function(e){return new f(e.lng,e.lat)},inverse:function(e){return new g(e.y,e.x)}}),D=l.extend({init:function(){var e=this,t=e._proj=new T,n=this.c=2*w*t.options.datum.a;this._tm=d.translate(.5,.5).times(d.scale(1/n,-1/n)),this._itm=d.scale(n,-n).times(d.translate(-.5,-.5))},toPoint:function(e,t,n){var i=this._proj.forward(e,n);return i.transform(this._tm).scale(t||1)},toLocation:function(e,t,n){return e=e.clone().scale(1/(t||1)).transform(this._itm),this._proj.inverse(e,n)}}),P=l.extend({init:function(){this._proj=new S},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}}),E=l.extend({init:function(){this._proj=new A},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}});h(c,{map:{crs:{EPSG3395:P,EPSG3857:D,EPSG4326:E},datums:{WGS84:C},projections:{Equirectangular:A,Mercator:S,SphericalMercator:T}}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.Class,r=n.dataviz,o=n.deepExtend,a=r.defined,s=r.map.Extent,l=i.extend({init:function(n,i){this._initOptions(i),this.map=n,this.element=e("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(n.scrollElement),this._beforeReset=t(this._beforeReset,this),this._reset=t(this._reset,this),this._resize=t(this._resize,this),this._panEnd=t(this._panEnd,this),this._activate(),this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset(),this._activate(),this._applyExtent(!0)},hide:function(){this._deactivate(),this._setVisibility(!1)},reset:function(){this._beforeReset(),this._reset()},_reset:function(){this._applyExtent()},_beforeReset:e.noop,_resize:e.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var e=this.options,t=this.map.zoom(),n=!a(e.minZoom)||t>=e.minZoom,i=!a(e.maxZoom)||e.maxZoom>=t,r=s.create(e.extent),o=!r||r.overlaps(this.map.extent());this._setVisibility(n&&i&&o)},_setVisibility:function(e){this.element.css("display",e?"":"none")},_activate:function(){var e=this.map;e.bind("beforeReset",this._beforeReset),e.bind("reset",this._reset),e.bind("resize",this._resize),e.bind("panEnd",this._panEnd)},_deactivate:function(){var e=this.map;e.unbind("beforeReset",this._beforeReset),e.unbind("reset",this._reset),e.unbind("resize",this._resize),e.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var e=this.map.attribution;e&&e.add(this.options.attribution)}});o(r,{map:{layers:{Layer:l}}})}(window.kendo.jQuery),function(){function e(e){return null===e?null:e instanceof u?e:new u(e)}function t(e){return e&&p.isFunction(e.matrix)?e.matrix():e}function n(e,t,n,i){var r=0,o=0;return i&&(r=f.atan2(i.c*n,i.a*t),0!==i.b&&(o=f.atan2(i.d*n,i.b*t))),{x:r,y:o}}function i(e,t){for(;t>e;)e+=90;return e}function r(e,t){var n,i,r;for(n=0;t.length>n;n++)i=t[n],r=i.charAt(0).toUpperCase()+i.substring(1,i.length),e["set"+r]=o(i),e["get"+r]=a(i)}function o(e){return function(t){return this[e]!==t&&(this[e]=t,this.geometryChange()),this}}function a(e){return function(){return this[e]}}var s,l,c,d,h,u,f=Math,p=window.kendo,g=p.Class,m=p.deepExtend,v=p.dataviz,y=v.util,_=y.defined,w=y.rad,x=y.deg,b=y.round,k=f.PI/2,C=y.MIN_NUM,S=y.MAX_NUM,T=g.extend({init:function(e,t){this.x=e||0,this.y=t||0},geometryChange:y.mixins.geometryChange,equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new T(this.x,this.y)},rotate:function(t,n){return this.transform(e().rotate(t,n))},translate:function(e,t){return this.x+=e,this.y+=t,this.geometryChange(),this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){return this.x=this.y=0,this.translate(e,t)},scale:function(e,t){return _(t)||(t=e),this.x*=e,this.y*=t,this.geometryChange(),this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var n=t(e),i=this.x,r=this.y;return this.x=n.a*i+n.c*r+n.e,this.y=n.b*i+n.d*r+n.f,this.geometryChange(),this},transformCopy:function(e){var t=this.clone();return e&&t.transform(e),t},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return f.sqrt(t*t+n*n)},round:function(e){return this.x=b(this.x,e),this.y=b(this.y,e),this.geometryChange(),this},toArray:function(e){var t=_(e),n=t?b(this.x,e):this.x,i=t?b(this.y,e):this.y;return[n,i]}});r(T.fn,["x","y"]),T.fn.toString=function(e,t){var n=this.x,i=this.y;return _(e)&&(n=b(n,e),i=b(i,e)),t=t||" ",n+t+i},T.create=function(e,t){return _(e)?e instanceof T?e:1===arguments.length&&2===e.length?new T(e[0],e[1]):new T(e,t):void 0},T.min=function(){var e,t,n=y.MAX_NUM,i=y.MAX_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=f.min(t.x,n),i=f.min(t.y,i);return new T(n,i)},T.max=function(){var e,t,n=y.MIN_NUM,i=y.MIN_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=f.max(t.x,n),i=f.max(t.y,i);return new T(n,i)},T.minPoint=function(){return new T(C,C)},T.maxPoint=function(){return new T(S,S)},T.ZERO=new T(0,0),s=g.extend({init:function(e,t){this.width=e||0,this.height=t||0},geometryChange:y.mixins.geometryChange,equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new s(this.width,this.height)}}),r(s.fn,["width","height"]),s.create=function(e,t){return _(e)?e instanceof s?e:1===arguments.length&&2===e.length?new s(e[0],e[1]):new s(e,t):void 0},s.ZERO=new s(0,0),l=g.extend({init:function(e,t){this.setOrigin(e||new T),this.setSize(t||new s)},geometryChange:y.mixins.geometryChange,clone:function(){return new l(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){return this.origin=T.create(e),this.origin.observer=this,this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(e){return this.size=s.create(e),this.size.observer=this,this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e),n=this.topRight().transformCopy(e),i=this.bottomRight().transformCopy(e),r=this.bottomLeft().transformCopy(e);return l.fromPoints(t,n,i,r)}}),l.fromPoints=function(){var e=T.min.apply(this,arguments),t=T.max.apply(this,arguments),n=new s(t.x-e.x,t.y-e.y);return new l(e,n)},l.union=function(e,t){return l.fromPoints(T.min(e.topLeft(),t.topLeft()),T.max(e.bottomRight(),t.bottomRight()))},c=g.extend({init:function(e,t){this.setCenter(e||new T),this.setRadius(t||0)},setCenter:function(e){return this.center=T.create(e),this.center.observer=this,this.geometryChange(),this},getCenter:function(){return this.center},geometryChange:y.mixins.geometryChange,equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new c(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(w(e))},bbox:function(e){var t,i,r,o,a=T.maxPoint(),s=T.minPoint(),c=n(this.center,this.radius,this.radius,e);for(t=0;4>t;t++)i=this._pointAt(c.x+t*k).transformCopy(e),r=this._pointAt(c.y+t*k).transformCopy(e),o=new T(i.x,r.y),a=T.min(a,o),s=T.max(s,o);return l.fromPoints(a,s)},_pointAt:function(e){var t=this.center,n=this.radius;return new T(t.x-n*f.cos(e),t.y-n*f.sin(e))}}),r(c.fn,["radius"]),d=g.extend({init:function(e,t){this.setCenter(e||new T),t=t||{},this.radiusX=t.radiusX,this.radiusY=t.radiusY||t.radiusX,this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.anticlockwise=t.anticlockwise||!1},setCenter:function(e){return this.center=T.create(e),this.center.observer=this,this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:90,geometryChange:y.mixins.geometryChange,pointAt:function(e){var t=this.center,n=w(e);return new T(t.x+this.radiusX*f.cos(n),t.y+this.radiusY*f.sin(n))},curvePoints:function(){var e,t,n,i=this.startAngle,r=this.anticlockwise?-1:1,o=[this.pointAt(i)],a=i,s=this._arcInterval(),l=s.endAngle-s.startAngle,c=f.ceil(l/this.MAX_INTERVAL),d=l/c;for(e=1;c>=e;e++)t=a+r*d,n=this._intervalCurvePoints(a,t),o.push(n.cp1,n.cp2,n.p2),a=t;return o},bbox:function(e){for(var t,r,o=this,a=o._arcInterval(),s=a.startAngle,c=a.endAngle,d=n(this.center,this.radiusX,this.radiusY,e),h=x(d.x),u=x(d.y),f=o.pointAt(s).transformCopy(e),p=o.pointAt(c).transformCopy(e),g=T.min(f,p),m=T.max(f,p),v=i(h,s),y=i(u,s);c>v||c>y;)c>v&&(t=o.pointAt(v).transformCopy(e),v+=90),c>y&&(r=o.pointAt(y).transformCopy(e),y+=90),f=new T(t.x,r.y),g=T.min(g,f),m=T.max(m,f);return l.fromPoints(g,m)},_arcInterval:function(){var e,t=this.startAngle,n=this.endAngle,i=this.anticlockwise;return i&&(e=t,t=n,n=e),(t>n||i&&t===n)&&(n+=360),{startAngle:t,endAngle:n}},_intervalCurvePoints:function(e,t){var n=this,i=n.pointAt(e),r=n.pointAt(t),o=n._derivativeAt(e),a=n._derivativeAt(t),s=(w(t)-w(e))/3,l=new T(i.x+s*o.x,i.y+s*o.y),c=new T(r.x-s*a.x,r.y-s*a.y);return{p1:i,cp1:l,cp2:c,p2:r}},_derivativeAt:function(e){var t=this,n=w(e);return new T(-t.radiusX*f.sin(n),t.radiusY*f.cos(n))}}),r(d.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),h=g.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},multiplyCopy:function(e){return new h(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},clone:function(){return new h(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){return e?this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f:!1},round:function(e){return this.a=b(this.a,e),this.b=b(this.b,e),this.c=b(this.c,e),this.d=b(this.d,e),this.e=b(this.e,e),this.f=b(this.f,e),this},toArray:function(e){var t,n=[this.a,this.b,this.c,this.d,this.e,this.f];if(_(e))for(t=0;n.length>t;t++)n[t]=b(n[t],e);return n}}),h.fn.toString=function(e,t){return this.toArray(e).join(t||",")},h.translate=function(e,t){return new h(1,0,0,1,e,t)},h.unit=function(){return new h(1,0,0,1,0,0)},h.rotate=function(e,t,n){var i=new h;return i.a=f.cos(w(e)),i.b=f.sin(w(e)),i.c=-i.b,i.d=i.a,i.e=t-t*i.a+n*i.b||0,i.f=n-n*i.a-t*i.b||0,i},h.scale=function(e,t){return new h(e,0,0,t,0,0)},h.IDENTITY=h.unit(),u=g.extend({init:function(e){this._matrix=e||h.unit()},clone:function(){return new u(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},_optionsChange:function(){this.observer&&this.observer.optionsChange({field:"transform",value:this})},translate:function(e,t){return this._matrix=this._matrix.multiplyCopy(h.translate(e,t)),this._optionsChange(),this},scale:function(e,t,n){return _(t)||(t=e),n&&(n=T.create(n),this._matrix=this._matrix.multiplyCopy(h.translate(n.x,n.y))),this._matrix=this._matrix.multiplyCopy(h.scale(e,t)),n&&(this._matrix=this._matrix.multiplyCopy(h.translate(-n.x,-n.y))),this._optionsChange(),this},rotate:function(e,t){return t=T.create(t)||T.ZERO,this._matrix=this._matrix.multiplyCopy(h.rotate(e,t.x,t.y)),this._optionsChange(),this},multiply:function(e){var n=t(e);return this._matrix=this._matrix.multiplyCopy(n),this._optionsChange(),this},matrix:function(){return this._matrix}}),m(v,{geometry:{Arc:d,Circle:c,Matrix:h,Point:T,Rect:l,Size:s,Transformation:u,transform:e,toMatrix:t}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.Class,r=n.data.DataSource,o=n.dataviz,a=n.deepExtend,s=o.last,l=o.util.defined,c=o.geometry,d=o.drawing,h=d.Group,u=o.map,f=u.Location,p=u.layers.Layer,g=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this.surface=d.Surface.create(this.element,{width:e.scrollElement.width(),height:e.scrollElement.height()}),this._initRoot(),this.movable=new n.ui.Movable(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this._initDataSource()},options:{autoBind:!0},destroy:function(){p.fn.destroy.call(this),this.surface.destroy(),this.dataSource.unbind("change",this._dataChange)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_reset:function(){p.fn._reset.call(this),this._translateSurface(),this._data&&this._load(this._data)},_initRoot:function(){this._root=new h,this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear(),this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=t(this._dataChange,this),this.dataSource=r.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._data=e.sender.view(),this._load(this._data)},_load:function(e){var t,n,i;for(this._clearMarkers(),this._loader||(this._loader=new m(this.map,this.options.style,this)),t=new h,n=0;e.length>n;n++)i=this._loader.parse(e[n]),i&&t.append(i);this._root.clear(),this._root.append(t)},shapeCreated:function(e){var t,n=!1;return e instanceof d.Circle&&(n=l(this._createMarker(e))),n||(t={layer:this,shape:e},n=this.map.trigger("shapeCreated",t)),n},_createMarker:function(e){var t=this.map.markers.bind({location:e.location},e.dataItem);return t&&this._markers.push(t),t},_clearMarkers:function(){for(var e=0;this._markers.length>e;e++)this.map.markers.remove(this._markers[e]);this._markers=[]},_panEnd:function(e){p.fn._panEnd.call(this,e),this._translateSurface()},_translateSurface:function(){var e=this.map,t=e.locationToView(e.extent().nw);this.surface.translate&&(this.surface.translate(t),this.movable.moveTo({x:t.x,y:t.y}))},_handler:function(e){var t=this;return function(n){if(n.element){var i={layer:t,shape:n.element,originalEvent:n.originalEvent};t.map.trigger(e,i)}}}}),m=i.extend({init:function(e,t,n){this.observer=n,this.locator=e,this.style=t},parse:function(e){var t=new h;return"Feature"===e.type?this._loadGeometryTo(t,e.geometry,e):this._loadGeometryTo(t,e,e),2>t.children.length&&(t=t.children[0]),t},_shapeCreated:function(e){var t=!1;return this.observer&&this.observer.shapeCreated&&(t=this.observer.shapeCreated(e)),t},_loadGeometryTo:function(e,t,n){var i,r,o=t.coordinates;switch(t.type){case"LineString":r=this._loadPolygon(e,[o],n),this._setLineFill(r);break;case"MultiLineString":for(i=0;o.length>i;i++)r=this._loadPolygon(e,[o[i]],n),this._setLineFill(r);break;case"Polygon":this._loadPolygon(e,o,n);break;case"MultiPolygon":for(i=0;o.length>i;i++)this._loadPolygon(e,o[i],n);break;case"Point":this._loadPoint(e,o,n);break;case"MultiPoint":for(i=0;o.length>i;i++)this._loadPoint(e,o[i],n)}},_setLineFill:function(e){var t=e.segments;(4>t.length||!t[0].anchor().equals(s(t).anchor()))&&(e.options.fill=null)},_loadShape:function(e,t){return this._shapeCreated(t)||e.append(t),t},_loadPolygon:function(e,t,n){var i=this._buildPolygon(t);return i.dataItem=n,this._loadShape(e,i)},_buildPolygon:function(e){var t,n,i,r=e.length>1?d.MultiPath:d.Path,o=new r(this.style);for(t=0;e.length>t;t++)for(n=0;e[t].length>n;n++)i=this.locator.locationToView(f.fromLngLat(e[t][n])),0===n?o.moveTo(i.x,i.y):o.lineTo(i.x,i.y);return o},_loadPoint:function(e,t,n){var i=f.fromLngLat(t),r=this.locator.locationToView(i),o=new c.Circle(r,10),a=new d.Circle(o,this.style);return a.dataItem=n,a.location=i,this._loadShape(e,a)}});a(n.data,{schemas:{geojson:{type:"json",data:function(e){return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e}}},transports:{geojson:{read:{dataType:"json"}}}}),a(o,{map:{layers:{shape:g,ShapeLayer:g},GeoJSONLoader:m}})}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.getter,i=t.dataviz,r=t.deepExtend,o=i.util,a=o.defined,s=i.geometry,l=i.drawing,c=i.map,d=c.Location,h=c.layers.ShapeLayer,u=h.extend({options:{autoBind:!0,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(e){var t,i,r,o,s,l,c,h,u,f,p,g;if(0!==e.length)for(t=this.options,i=n(t.valueField),e=e.slice(0),e.sort(function(e,t){return i(t)-i(e)}),r=i(e[0]),o=this._scaleType(),l=0;e.length>l;l++)c=e[l],h=n(t.locationField)(c),u=n(t.valueField)(c),a(h)&&a(u)&&(s||(s=new o([0,u],[t.minSize,t.maxSize])),h=d.create(h),f=this.map.locationToView(h),p=s.map(u),g=this._createSymbol({center:f,size:p,style:t.style,dataItem:c,location:h}),g.dataItem=c,g.location=h,g.value=u,this._drawSymbol(g))},_scaleType:function(){var e=this.options.scale;return t.isFunction(e)?e:i.map.scales[e]},_createSymbol:function(e){var n=this.options.symbol;return t.isFunction(n)||(n=i.map.symbols[n]),n(e)},_drawSymbol:function(e){var t={layer:this,shape:e},n=this.map.trigger("shapeCreated",t);n||this.surface.draw(e)}}),f=t.Class.extend({init:function(e,t){var n,i;this._domain=e,this._range=t,n=Math.sqrt(e[1])-Math.sqrt(e[0]),i=t[1]-t[0],this._ratio=i/n},map:function(e){var t=(Math.sqrt(e)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+t}}),p={circle:function(e){var t=new s.Circle(e.center,e.size/2);return new l.Circle(t,e.style)},square:function(e){var t=new l.Path(e.style),n=e.size/2,i=e.center;return t.moveTo(i.x-n,i.y-n).lineTo(i.x+n,i.y-n).lineTo(i.x+n,i.y+n).lineTo(i.x-n,i.y+n).close(),t}};r(i,{map:{layers:{bubble:u,BubbleLayer:u},scales:{sqrt:f},symbols:p}})}(window.kendo.jQuery),function(e){function t(e){return new u(c(e.x),c(e.y))}function n(e,t){return"x:"+e.x+"y:"+e.y+"zoom:"+t}var i=Math,r=e.proxy,o=window.kendo,a=o.Class,s=o.template,l=o.dataviz,c=l.round,d=o.deepExtend,h=l.geometry,u=h.Point,f=l.map.layers.Layer,p=l.util,g=p.renderSize,m=p.limitValue,v=f.extend({init:function(e,t){f.fn.init.call(this,e,t),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var n=this._viewType();this._view=new n(this.element,this.options)},destroy:function(){f.fn.destroy.call(this),this._view.destroy(),this._view=null},_reset:function(){f.fn._reset.call(this),this._updateView(),this._view.clear(),this._view.reset()},_viewType:function(){return y},_activate:function(){f.fn._activate.call(this),o.support.mobileOS||(this._pan||(this._pan=o.throttle(r(this._render,this),100)),this.map.bind("pan",this._pan))},_deactivate:function(){f.fn._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},_updateView:function(){var e=this._view,t=this.map,n=t.extent(),i={nw:t.locationToLayer(n.nw).round(),se:t.locationToLayer(n.se).round()};e.center(t.locationToLayer(t.center())),e.extent(i),e.zoom(t.zoom())},_resize:function(){this._render()},_panEnd:function(e){f.fn._panEnd.call(this,e),this._render()},_render:function(){this._updateView(),this._view.render()}}),y=a.extend({init:function(e,t){this.element=e,this._initOptions(t),this.pool=new w},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(e){this._center=e},extent:function(e){this._extent=e},zoom:function(e){this._zoom=e},pointToTileIndex:function(e){return new u(i.floor(e.x/this.options.tileSize),i.floor(e.y/this.options.tileSize))},clear:function(){this.pool.empty()},tileCount:function(){var e=this.size(),t=this.pointToTileIndex(this._extent.nw),n=this._extent.nw,r=this.indexToPoint(t).translate(-n.x,-n.y);return{x:i.ceil((i.abs(r.x)+e.width)/this.options.tileSize),y:i.ceil((i.abs(r.y)+e.height)/this.options.tileSize)}},size:function(){var e=this._extent.nw,t=this._extent.se,n=t.clone().translate(-e.x,-e.y);return{width:n.x,height:n.y}},indexToPoint:function(e){var t=e.x,n=e.y;return new u(t*this.options.tileSize,n*this.options.tileSize)},subdomainText:function(){var e=this.options.subdomains;return e[this.subdomainIndex++%e.length]},destroy:function(){this.element.empty(),this.pool.empty()},reset:function(){this.subdomainIndex=0,this.basePoint=this._extent.nw,this.render()},render:function(){var e,t,n,i=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(t=0;i.x>t;t++)for(n=0;i.y>n;n++)e=this.createTile({x:r.x+t,y:r.y+n}),e.options.visible||(this.element.append(e.element),e.options.visible=!0)},createTile:function(e){var t=this.tileOptions(e);return this.pool.get(this._center,t)},tileOptions:function(e){var n=this.wrapIndex(e),i=this.indexToPoint(e),r=this.basePoint,o=i.clone().translate(-r.x,-r.y);return{index:n,currentIndex:e,point:i,offset:t(o),zoom:this._zoom,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(e){var t=i.pow(2,this._zoom);return{x:this.wrapValue(e.x,t),y:m(e.y,0,t-1)}},wrapValue:function(e,t){var n=i.abs(e)%t;
return e=e>=0?n:t-(0===n?t:n)}}),_=a.extend({init:function(e){this._initOptions(e),this.createElement(),this.load(),this.options.visible=!1},options:{urlTemplate:"",errorUrlTemplate:"",visible:!1},createElement:function(){this.element=e("<img style='position: absolute; display: block; visibility: visible;' />").error(r(function(e){this.errorUrl()?e.target.setAttribute("src",this.errorUrl()):e.target.removeAttribute("src")},this))},load:function(e){this.options=d({},this.options,e);var t=this.element[0];t.style.visibility="visible",t.style.display="block",t.style.top=g(this.options.offset.y),t.style.left=g(this.options.offset.x),t.setAttribute("src",this.url()),this.options.id=n(this.options.currentIndex,this.options.zoom),this.options.visible=!0},url:function(){var e=s(this.options.urlTemplate);return e(this.urlOptions())},errorUrl:function(){var e=s(this.options.errorUrlTemplate);return e(this.urlOptions())},urlOptions:function(){var e=this.options;return{zoom:e.zoom,subdomain:e.subdomain,z:e.zoom,x:e.index.x,y:e.index.y,s:e.subdomain,quadkey:e.quadkey,q:e.quadkey,culture:e.culture,c:e.culture}},destroy:function(){this.element&&(this.element.remove(),this.element=null)}}),w=a.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(e,t){var n,i=this;return n=i._items.length>=i.options.maxSize?i._update(e,t):i._create(t)},empty:function(){var e,t=this._items;for(e=0;t.length>e;e++)t[e].destroy();this._items=[]},_create:function(e){var t,i,r,o,a=this,s=a._items,l=n(e.currentIndex,e.zoom);for(i=0;s.length>i;i++)r=s[i],r.options.id===l&&(t=r,o=t);return t?t.load(e):(o=new _(e),this._items.push(o)),o},_update:function(e,t){var i,r,o,a,s=this,l=s._items,c=-Number.MAX_VALUE,d=n(t.currentIndex,t.zoom);for(o=0;l.length>o;o++){if(a=l[o],i=a.options.point.clone().distanceTo(e),a.options.id===d)return l[o];i>c&&(r=o,c=i)}return l[r].load(t),l[r]}});d(l,{map:{layers:{tile:v,TileLayer:v,ImageTile:_,TilePool:w,TileView:y}}})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.dataviz,r=n.deepExtend,o=i.defined,a=i.map.Extent,s=i.map.Location,l=i.map.layers.TileLayer,c=i.map.layers.TileView,d=l.extend({init:function(t,n){l.fn.init.call(this,t,n),this._onMetadata=e.proxy(this._onMetadata,this),this._fetchMetadata()},options:{baseUrl:"//dev.virtualearth.net/REST/v1/Imagery/Metadata/",imagerySet:"road"},_fetchMetadata:function(){var t=this.options;if(!t.key)throw Error("Bing tile layer: API key is required");e.ajax({url:t.baseUrl+t.imagerySet,data:{output:"json",include:"ImageryProviders",key:t.key,uriScheme:this._scheme(window.location.protocol)},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(e){return"https"===e.replace(":","")?"https":"http"},_onMetadata:function(e){var t,n;e&&e.resourceSets.length&&(t=this.resource=e.resourceSets[0].resources[0],r(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains}),n=this.options,o(n.minZoom)||(n.minZoom=t.zoomMin),o(n.maxZoom)||(n.maxZoom=t.zoomMax),this._addAttribution(),this.reset())},_viewType:function(){return h},_addAttribution:function(){var e,t,n,i,r,o=this.map.attribution;if(o&&(e=this.resource.imageryProviders))for(t=0;e.length>t;t++)for(n=e[t],i=0;n.coverageAreas.length>i;i++)r=n.coverageAreas[i],o.add({text:n.attribution,minZoom:r.zoomMin,maxZoom:r.zoomMax,extent:new a(new s(r.bbox[2],r.bbox[1]),new s(r.bbox[0],r.bbox[3]))})},imagerySet:function(e){return e?(this.options.imagerySet=e,this.map.attribution.clear(),this._fetchMetadata(),this._reset(),t):this.options.imagerySet}}),h=c.extend({options:{culture:"en-US"},tileOptions:function(e){var t=c.fn.tileOptions.call(this,e);return t.culture=this.options.culture,t.quadkey=this.tileQuadKey(this.wrapIndex(e)),t},tileQuadKey:function(e){var t,n,i,r="";for(i=this._zoom;i>0;i--)t=0,n=1<<i-1,0!==(e.x&n)&&t++,0!==(e.y&n)&&(t+=2),r+=t;return r}});r(i,{map:{layers:{bing:d,BingLayer:d,BingView:h}}})}(window.kendo.jQuery),function(e,t){var n=document,i=Math,r=e.inArray,o=e.proxy,a=window.kendo,s=a.Class,l=a.data.DataSource,c=a.ui.Tooltip,d=a.dataviz,h=a.deepExtend,u=d.map,f=u.Location,p=u.layers.Layer,g=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this._markerClick=o(this._markerClick,this),this.element.on("click",".k-marker",this._markerClick),this.items=[],this._initDataSource()},destroy:function(){p.fn.destroy.call(this),this.element.off("click",".k-marker",this._markerClick),this.dataSource.unbind("change",this._dataChange),this.clear()},options:{zIndex:1e3,autoBind:!0,dataSource:{},locationField:"location",titleField:"title"},add:function(t){if(!e.isArray(t))return this._addOne(t);for(var n=0;t.length>n;n++)this._addOne(t[n])},remove:function(e){e.destroy();var t=r(e,this.items);t>-1&&this.items.splice(t,1)},clear:function(){for(var e=0;this.items.length>e;e++)this.items[e].destroy();this.items=[]},update:function(e){var t,n=e.location();n&&(e.showAt(this.map.locationToView(n)),t={marker:e,layer:this},this.map.trigger("markerActivate",t))},_reset:function(){var e,t;for(p.fn._reset.call(this),e=this.items,t=0;e.length>t;t++)this.update(e[t])},bind:function(e,n){var i,r,o=u.Marker.create(e,this.options);return o.dataItem=n,i={marker:o,layer:this},r=this.map.trigger("markerCreated",i),r?t:(this.add(o),o)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_addOne:function(e){var t=m.create(e,this.options);return t.addTo(this),t},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=o(this._dataChange,this),this.dataSource=l.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._load(e.sender.view())},_load:function(e){var t,n,i,r;for(this._data=e,this.clear(),t=a.getter(this.options.locationField),n=a.getter(this.options.titleField),i=0;e.length>i;i++)r=e[i],this.bind({location:t(r),title:n(r)},r)},_markerClick:function(t){var n={marker:e(t.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",n)}}),m=s.extend({init:function(e){this.options=e||{}},addTo:function(e){this.layer=e.markers||e,this.layer.items.push(this),this.layer.update(this)},location:function(e){return e?(this.options.location=f.create(e).toArray(),this.layer&&this.layer.update(this),this):f.create(this.options.location)},showAt:function(e){this.render(),this.element.css({left:i.round(e.x),top:i.round(e.y)}),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},hide:function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},destroy:function(){this.layer=null,this.hide()},render:function(){var t,i;this.element||(t=this.options,i=this.layer,this.element=e(n.createElement("span")).addClass("k-marker k-marker-"+a.toHyphens(t.shape||"pin")).attr("title",t.title).data("kendoMarker",this).css("zIndex",t.zIndex),i&&i.element.append(this.element),this.renderTooltip())},renderTooltip:function(){var e,t,n=this,i=n.options.title,r=n.options.tooltip||{};r&&c&&(e=r.template,e&&(t=a.template(e),r.content=function(e){return e.location=n.location(),e.marker=n,t(e)}),(i||r.content||r.contentUrl)&&(this.tooltip=new c(this.element,r),this.tooltip.marker=this))}});m.create=function(e,t){return e instanceof m?e:new m(h({},t,e))},h(d,{map:{layers:{marker:g,MarkerLayer:g},Marker:m}})}(window.kendo.jQuery),function(e){var t=document,n=Math,i=n.min,r=n.pow,o=e.proxy,a=window.kendo,s=a.ui.Widget,l=a.deepExtend,c=a.dataviz,d=c.ui,h=c.defined,u=c.geometry,f=u.Point,p=c.map,g=p.Extent,m=p.Location,v=p.crs.EPSG3857,y=c.util,_=y.limitValue,w=y.renderPos,x=y.valueOrDefault,b="k-",k=.9,C=.93,S="DOMMouseScroll mousewheel",T=5,A=s.extend({init:function(e,n){a.destroy(e),s.fn.init.call(this,e),this._initOptions(n),this.bind(this.events,n),this.crs=new v,this.element.addClass(b+this.options.name.toLowerCase()).css("position","relative").empty().append(t.createElement("div")),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheel=o(this._mousewheel,this),this.element.bind("click",o(this._click,this)),this.element.bind(S,this._mousewheel)},options:{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0},events:["beforeReset","click","reset","pan","panEnd","markerActivate","markerClick","markerCreated","shapeClick","shapeCreated","shapeMouseEnter","shapeMouseLeave","zoomStart","zoomEnd"],destroy:function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),this.markers.destroy();for(var e=0;this.layers.length>e;e++)this.layers[e].destroy();s.fn.destroy.call(this)},zoom:function(e){var t=this.options;return h(e)?(e=_(e,t.minZoom,t.maxZoom),t.zoom!==e&&(t.zoom=e,this._reset()),this):t.zoom},center:function(e){return e?(this.options.center=m.create(e).toArray(),this._reset(),this):m.create(this.options.center)},extent:function(e){return e?(this._setExtent(e),this):this._getExtent()},setOptions:function(e){s.fn.setOptions.call(this,e),this._reset()},locationToLayer:function(e,t){var n=!this.options.wraparound;return e=m.create(e),this.crs.toPoint(e,this._layerSize(t),n)},layerToLocation:function(e,t){var n=!this.options.wraparound;return e=f.create(e),this.crs.toLocation(e,this._layerSize(t),n)},locationToView:function(e){var t,n;return e=m.create(e),t=this.locationToLayer(this._viewOrigin),n=this.locationToLayer(e),n.translateWith(t.scale(-1))},viewToLocation:function(e,t){var n=this.locationToLayer(this._getOrigin(),t);return e=f.create(e),e=e.clone().translateWith(n),this.layerToLocation(e,t)},eventOffset:function(e){var t=this.element.offset(),n=e.originalEvent||e,i=x(n.pageX,n.clientX)-t.left,r=x(n.pageY,n.clientY)-t.top;return new u.Point(i,r)},eventToView:function(e){var t=this.eventOffset(e);return this.locationToView(this.viewToLocation(t))},eventToLayer:function(e){return this.locationToLayer(this.eventToLocation(e))},eventToLocation:function(e){var t=this.eventOffset(e);return this.viewToLocation(t)},viewSize:function(){var e=this.element,t=this._layerSize(),n=e.width();return this.options.wraparound||(n=i(t,n)),{width:n,height:i(t,e.height())}},_setOrigin:function(e,t){var n,i=this.viewSize();return e=this._origin=m.create(e),n=this.locationToLayer(e,t),n.x+=i.width/2,n.y+=i.height/2,this.options.center=this.layerToLocation(n,t).toArray(),this},_getOrigin:function(e){var t,n=this.viewSize();return(e||!this._origin)&&(t=this.locationToLayer(this.center()),t.x-=n.width/2,t.y-=n.height/2,this._origin=this.layerToLocation(t)),this._origin},_setExtent:function(e){var t,i,r,o,a,s,l;for(e=g.create(e),this.center(e.center()),t=this.element.width(),i=this.element.height(),r=this.options.maxZoom;r>=this.options.minZoom&&(o=this.locationToLayer(e.nw,r),a=this.locationToLayer(e.se,r),s=n.abs(a.x-o.x),l=n.abs(a.y-o.y),!(t>=s&&i>=l));r--);this.zoom(r)},_getExtent:function(){var e,t=this._getOrigin(),n=this.locationToLayer(t),i=this.viewSize();return n.x+=i.width,n.y+=i.height,e=this.layerToLocation(n),new g(t,e)},_zoomAround:function(e,t){this._setOrigin(this.layerToLocation(e,t),t),this.zoom(t)},_initControls:function(){var e=this.options.controls;d.Attribution&&e.attribution&&this._createAttribution(e.attribution),a.support.mobileOS||(d.Navigator&&e.navigator&&this._createNavigator(e.navigator),d.ZoomControl&&e.zoom&&this._createZoomControl(e.zoom))},_createControlElement:function(t,n){var i=t.position||n,r="."+w(i).replace(" ","."),o=e(".k-map-controls"+r,this.element);return 0===o.length&&(o=e("<div>").addClass("k-map-controls "+w(i)).appendTo(this.element)),e("<div>").appendTo(o)},_createAttribution:function(e){var t=this._createControlElement(e,"bottomRight");this.attribution=new d.Attribution(t,e)},_createNavigator:function(e){var t=this._createControlElement(e,"topLeft"),n=this.navigator=new d.Navigator(t,e);this._navigatorPan=o(this._navigatorPan,this),n.bind("pan",this._navigatorPan),this._navigatorCenter=o(this._navigatorCenter,this),n.bind("center",this._navigatorCenter)},_navigatorPan:function(e){var t=this,n=t.scroller,i=n.scrollLeft+e.x,r=n.scrollTop-e.y,o=this._virtualSize,a=this.element.height(),s=this.element.width();i=_(i,o.x.min,o.x.max-s),r=_(r,o.y.min,o.y.max-a),t.scroller.one("scroll",function(e){t._scrollEnd(e)}),t.scroller.scrollTo(-i,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(e){var t=this._createControlElement(e,"topLeft"),n=this.zoomControl=new d.ZoomControl(t,e);this._zoomControlChange=o(this._zoomControlChange,this),n.bind("change",this._zoomControlChange)},_zoomControlChange:function(e){this.trigger("zoomStart",{originalEvent:e})||(this.zoom(this.zoom()+e.delta),this.trigger("zoomEnd",{originalEvent:e}))},_initScroller:function(){var e=a.support.mobileOS?C:k,t=this.options.zoomable!==!1,n=this.scroller=new a.mobile.ui.Scroller(this.element.children(0),{friction:e,velocityMultiplier:T,zoom:t,mousewheelScrolling:!1});n.bind("scroll",o(this._scroll,this)),n.bind("scrollEnd",o(this._scrollEnd,this)),n.userEvents.bind("gesturestart",o(this._scaleStart,this)),n.userEvents.bind("gestureend",o(this._scale,this)),this.scrollElement=n.scrollElement},_initLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[];for(e=0;o.length>e;e++)t=o[e],n=t.type||"shape",i=this.options.layerDefaults[n],r=c.map.layers[n],a.push(new r(this,l({},i,t)))},_initMarkers:function(){this.markers=new p.layers.MarkerLayer(this,this.options.markerDefaults),this.markers.add(this.options.markers)},_scroll:function(e){var t=this.locationToLayer(this._viewOrigin).round(),n=e.sender.movable,i=new u.Point(n.x,n.y).scale(-1).scale(1/n.scale);t.x+=i.x,t.y+=i.y,this._setOrigin(this.layerToLocation(t)),this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(e){this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scaleStart:function(e){if(this.trigger("zoomStart",{originalEvent:e})){var t=e.touches[1];t&&t.cancel()}},_scale:function(e){var t=this.scroller.movable.scale,n=this._scaleToZoom(t),i=new u.Point(e.center.x,e.center.y),r=this.viewToLocation(i,n),o=this.locationToLayer(r,n),a=o.translate(-i.x,-i.y);this._zoomAround(a,n),this.trigger("zoomEnd",{originalEvent:e})},_scaleToZoom:function(e){var t=this._layerSize()*e,i=t/this.options.minSize,r=n.log(i)/n.log(2);return n.round(r)},_reset:function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},_resetScroller:function(){var e,t,n,i,o=this.scroller,a=o.dimensions.x,s=o.dimensions.y,l=this._layerSize(),c=20*l,d=this.extent().nw,h=this.locationToLayer(d).round();o.movable.round=!0,o.reset(),o.userEvents.cancel(),e=this.options.maxZoom-this.zoom(),o.dimensions.maxScale=r(2,e),t={min:-h.x,max:l-h.x},n={min:-h.y,max:l-h.y},this.options.wraparound&&(t.min=-c,t.max=c),this.options.pannable===!1&&(i=this.viewSize(),t.min=n.min=0,t.max=i.width,n.max=i.height),a.makeVirtual(),s.makeVirtual(),a.virtualSize(t.min,t.max),s.virtualSize(n.min,n.max),this._virtualSize={x:t,y:n}},_renderLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[],s=this.scrollWrap;for(s.empty(),e=0;o.length>e;e++)t=o[e],n=t.type||"shape",i=this.options.layerDefaults[n],r=c.map.layers[n],a.push(new r(this,l({},i,t)))},_layerSize:function(e){return e=x(e,this.options.zoom),this.options.minSize*r(2,e)},_click:function(e){var t=this.eventOffset(e);this.trigger("click",{originalEvent:e,location:this.viewToLocation(t)})},_mousewheel:function(e){var t,n,i,r,o,a,s,l;e.preventDefault(),t=c.mwDelta(e)>0?-1:1,n=this.options,i=this.zoom(),r=_(i+t,n.minZoom,n.maxZoom),n.zoomable!==!1&&r!==i&&(this.trigger("zoomStart",{originalEvent:e})||(o=this.eventOffset(e),a=this.viewToLocation(o),s=this.locationToLayer(a,r),l=s.translate(-o.x,-o.y),this._zoomAround(l,r),this.trigger("zoomEnd",{originalEvent:e})))}});c.ui.plugin(A)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});