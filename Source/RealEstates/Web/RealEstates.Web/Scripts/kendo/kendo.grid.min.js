/*
* Kendo UI v2014.2.1008 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.data.min","./kendo.columnsorter.min","./kendo.editable.min","./kendo.window.min","./kendo.filtermenu.min","./kendo.columnmenu.min","./kendo.groupable.min","./kendo.pager.min","./kendo.selectable.min","./kendo.sortable.min","./kendo.reorderable.min","./kendo.resizable.min","./kendo.mobile.actionsheet.min","./kendo.mobile.pane.min"],e)}(function(){return function(e,t){function n(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function i(e){var t,n=" ";if(e){if(typeof e===Rt)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function r(t){var n=0;return e("> .k-grouping-header, > .k-grid-toolbar",t).each(function(){n+=this.offsetHeight}),n}function o(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function a(e){var t,n,i={},r={};if(!nt(e))for(X(e)||(e=[e]),t=0,n=e.length;n>t;t++)i[e[t].aggregate]=0,r[e[t].field]=i;return r}function s(e,t,n,i){t=e.eq(t),"number"==typeof n?t[i?"insertBefore":"insertAfter"](e.eq(n)):t.appendTo(n)}function l(t,n,i){return e(t).add(n).find(i)}function c(e,t,n){var i,r,o,a;for(n=X(n)?n:[n],i=0,r=n.length;r>i;i++)o=n[i],$(o)&&o.click&&(a=o.name||o.text,t.on(It+ut,"a.k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},et(o.click,e)))}function d(e){return K(e,function(e){return!e.hidden})}function h(e){var t,n,i,r=0;for(n=0,i=e.length;i>n;n++)t=e[n].style.width,t&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function u(e){return K(e,function(e){return e.locked})}function f(e){return K(e,function(e){return!e.locked})}function p(e){return K(e,function(e){return!e.locked&&!e.hidden})}function g(e){return K(e,function(e){return e.locked&&!e.hidden})}function m(t,n,i){var r,o=t;return W?t[0].innerHTML=i:(r=document.createElement("div"),r.innerHTML="<table><tbody>"+i+"</tbody></table>",t=r.firstChild.firstChild,n[0].replaceChild(t,o[0]),t=e(t)),t}function v(e){e=e||{};var t=e.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",Q({},e,{style:t})}function y(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function w(t,n,i,r){var o,a=t.find(">colgroup"),s=Y(n,function(e){return o=e.width,o&&0!==parseInt(o,10)?N.format('<col style="width:{0}"/>',typeof o===Rt?o:o+"px"):"<col />"});(i||a.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),a=e(Array(r+1).join('<col class="k-group-col">')+s.join("")),a.is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a),qt.msie&&8==qt.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function _(e,t){var n,i,r=0;for(n=0,i=t.length;i>n;n++)t[n].locked&&(e.eq(n).insertBefore(e.eq(r)),r++)}function b(e){var t,n,i,r={};for(n=0,i=e.length;i>n;n++)t=e[n],r[t.value]=t.text;return r}function x(e,t,n){var i=n&&n.length&&$(n[0])&&"value"in n[0],r=i?b(n)[e]:e;return r=null!=r?r:"",t?N.format(t,r):r}function k(e,t,n){for(var i,r=0,o=e[r];o;){if(i=n?!0:"none"!==o.style.display,i&&!Wt.test(o.className)&&--t<0){o.style.display=n?"":"none";break}o=e[++r]}}function C(t,n){for(var i,r,o=0,a=t.length;a>o;o+=1)r=t.eq(o),r.is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)-1)):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)-1),i.find("col").eq(n).remove(),r=i.find("tr:first")),k(r[0].cells,n,!1))}function S(t,n){for(var i,r,o,a=0,s=t.length;s>a;a+=1)r=t.eq(a),r.is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)+1)):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)+1),w(i.find(">form>table"),d(o),!1,0),r=i.find("tr:first")),k(r[0].cells,n,!0))}function T(e,t){var n,i,r;for(i=0,r=e.length;r>i;i+=1)n=e.eq(i).children().last(),n.attr("colspan",parseInt(n.attr("colspan"),10)+1),n=t.eq(i).children().last(),n.attr("colspan",parseInt(n.attr("colspan"),10)-1)}function D(e){var t,n,i=0,r=e.find(">colgroup>col");for(t=0,n=r.length;n>t;t+=1)i+=parseInt(r[t].style.width,10);return i}function A(e,t){var n,i=e.offsetHeight,r=t.offsetHeight;i>r?n=i+"px":r>i&&(n=r+"px"),n&&(e.style.height=t.style.height=n)}function P(e,t){var n,i,r;if(typeof e===Rt&&e===t)return e;if($(e)&&e.name===t)return e;if(X(e))for(n=0,i=e.length;i>n;n++)if(r=e[n],typeof r===Rt&&r===t||r.name===t)return r;return null}function E(t,n){var i,r,o,a=qt.msie;if(n===!0){if(t=e(t),i=!0,i&&(r=t.parent().scrollTop(),o=t.parent().scrollLeft()),a)try{t[0].setActive()}catch(s){t[0].focus()}else t[0].focus();i&&(t.parent().scrollTop(r),t.parent().scrollLeft(o))}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function M(t){var n=e(t.currentTarget),i=n.is("th"),r=this.table.add(this.lockedTable),o=this.thead.parent().add(e(">table",this.lockedHeader)),a=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"),s=n.closest("table")[0];N.support.touch||a&&n.find(N.roleSelector("filtercell")).length||(s===r[0]||s===r[1]||s===o[0]||s===o[1])&&(this.current(n),(i||!a)&&setTimeout(function(){Qt&&e(N._activeElement()).hasClass("k-widget")||E(s,!0)}),i&&t.preventDefault())}function I(t,n,i,r){if(t=e(t),r){var o=n;n=i,i=o}return n.not(t).length!=n.length?t:n.eq(t[0]==i[0]?0:1)}function L(e,t,n,i,r){var o,a,s=r?"prevAll":"nextAll";return e?(o=e.parent()[s](lt).first(),o[0]||!r&&!e.is("th")||(t=I(t,n,i,r),E(t),o=t.find((r?">thead>":">tbody>")+lt).first()),a=e.index(),e=o.children().eq(a),e[0]&&e.is(ct)||(e=o.children(ct).first())):e=n.find(dt),e}function z(e,t,n,i,r){var o=n.length>1;return e?e.prev(":visible")[0]?e=e.prevAll(at).first():o&&(t==n[1]?(E(n[0]),e=r(e.parent()).children(at).last()):t==i[1]&&(E(i[0]),e=i.eq(0).find("tr>"+at).last())):e=n.find(dt),e}function B(e,t,n,i,r){var o=n.length>1;return e?e.next(":visible")[0]?e=e.nextAll(at).first():o&&(t==n[0]?(E(n[1]),e=r(e.parent()).children(at).first()):t==i[0]&&(E(i[1]),e=i.eq(1).find("tr>"+at).first())):e=n.find(dt),e}function R(e,t,n,i,r){var o=2==n.length,a=!0,s=r?e.prevAll(at+":first"):e.nextAll(":visible:first");return s.length||(s=e.parent(),o&&(a=r&&t==n[0]||!r&&t==n[1],s=i(s)),a&&(s=s[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),s=s.children(at+(r?":last":":first"))),s}function F(e,t,i){return'<tr class="k-grouping-row">'+n(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+i+"</p></td></tr>"}function O(e){return'<tr class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var N=window.kendo,H=N.ui,V=N.data.DataSource,U=H.Groupable,W=N.support.tbodyInnerHtml,j=N._activeElement,G=H.Widget,q=N.keys,$=e.isPlainObject,Q=e.extend,Y=e.map,K=e.grep,X=e.isArray,Z=e.inArray,J=Array.prototype.push,et=e.proxy,tt=N.isFunction,nt=e.isEmptyObject,it=Math,rt="progress",ot="error",at=":not(.k-group-cell):not(.k-hierarchy-cell):visible",st="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",lt="tr:not(.k-footer-template):visible",ct=":not(.k-group-cell):not(.k-hierarchy-cell):visible",dt=lt+":first>"+ct+":first",ht="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",ut=".kendoGrid",ft="edit",pt="save",gt="remove",mt="detailInit",vt="filterMenuInit",yt="columnMenuInit",wt="change",_t="columnHide",bt="columnShow",xt="saveChanges",kt="dataBound",Ct="detailExpand",St="detailCollapse",Tt="k-state-focused",Dt="k-state-selected",At="columnResize",Pt="columnReorder",Et="columnLock",Mt="columnUnlock",It="click",Lt="height",zt="tabIndex",Bt="function",Rt="string",Ft="Are you sure you want to delete this record?",Ot="Delete",Nt="Cancel",Ht=/(\}|\#)/gi,Vt=/#/gi,Ut="[\\x20\\t\\r\\n\\f]",Wt=RegExp("(^|"+Ut+")(k-group-cell|k-hierarchy-cell)("+Ut+"|$)"),jt='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',Gt=!1,qt=N.support.browser,$t=qt.msie&&7==qt.version,Qt=qt.msie&&8==qt.version,Yt=G.extend({init:function(e,t){var n=this;G.fn.init.call(n,e,t),n._refreshHandler=et(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(wt,t._refreshHandler),t.dataSource=e,t.dataSource.bind(wt,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop},destroy:function(){var e=this;G.fn.destroy.call(e),e.dataSource.unbind(wt,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(ut),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,n=this,i=N.support.scrollbar()+1,r=n.element;r.css({width:"auto",overflow:"hidden"}).css(Gt?"padding-left":"padding-right",i),n.content=r.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+ut+" mousewheel"+ut,et(n._wheelScroll,n)),N.support.kineticScrollNeeded&&(n.drag=new N.UserEvents(n.wrapper,{global:!0,move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:i}).appendTo(r).bind("scroll"+ut,et(n._scroll,n))},_wheelScroll:function(t){if(!t.ctrlKey){var n=this.verticalScrollbar.scrollTop(),i=N.wheelDeltaY(t);i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+ut,!1),this.verticalScrollbar.scrollTop(n+-i))}},_scroll:function(e){var t=this,n=e.currentTarget.scrollTop,i=t.dataSource,r=t.itemHeight,o=i.skip()||0,a=t._rangeStart||o,s=t.element.innerHeight(),l=!!(t._scrollbarTop&&t._scrollbarTop>n),c=it.max(it.floor(n/r),0),d=it.max(c+it.floor(s/r),0);t._scrollTop=n-a*r,t._scrollbarTop=n,t._fetch(c,d,l)||(t.wrapper[0].scrollTop=t._scrollTop)},_fetch:function(e,t,n){var i=this,r=i.dataSource,o=i.itemHeight,a=r.take(),s=i._rangeStart||r.skip()||0,l=it.floor(e/a)*a,c=!1,d=.33;return s>e?(c=!0,s=it.max(0,t-a),i._scrollTop=(e-s)*o,i._page(s,a)):t>=s+a&&!n?(c=!0,s=e,i._scrollTop=o,i._page(s,a)):i._fetching||(l+a-a*d>e&&e>a&&r.prefetch(l-a,a),t>l+a*d&&r.prefetch(l+a,a)),c},_page:function(e,t){var n=this,i=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,i.inRange(e,t)?i.range(e,t):(N.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){i.range(e,t)},100))},refresh:function(){var e,t,n,i,r=this,o="",a=25e4,s=r.dataSource,l=r._rangeStart,c=N.support.kineticScrollNeeded?0:N.support.scrollbar(),d=r.wrapper[0];for(N.ui.progress(r.wrapper.parent(),!1),clearTimeout(r._timeout),n=r.itemHeight=r.options.itemHeight()||0,i=d.scrollWidth>d.offsetWidth?c:0,e=s.total()*n+i,t=0;t<it.floor(e/a);t++)o+='<div style="width:1px;height:'+a+'px"></div>';e%a&&(o+='<div style="width:1px;height:'+e%a+'px"></div>'),r.verticalScrollbar.html(o),d.scrollTop=r._scrollTop,r.drag&&r.drag.cancel(),l&&!r._fetching&&(r._rangeStart=s.skip(),1===s.page()&&(r.verticalScrollbar[0].scrollTop=0)),r._fetching=!1}}),Kt={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"}},Xt=N.ui.DataBoundWidget.extend({init:function(t,n){var i=this;n=X(n)?{dataSource:n}:n,G.fn.init.call(i,t,n),Gt=N.support.isRtl(t),i._element(),i._aria(),i._columns(i.options.columns),i._dataSource(),i._tbody(),i._pageable(),i._thead(),i._groupable(),i._toolbar(),i._setContentHeight(),i._templates(),i._navigatable(),i._selectable(),i._details(),i._editable(),i._attachCustomCommandsEvent(),i.options.autoBind?i.dataSource.fetch():i._footer(),i.lockedContent&&(i.wrapper.addClass("k-grid-lockedcolumns"),i._resizeHandler=function(){i.resize()},e(window).on("resize"+ut,i._resizeHandler)),N.notify(i)},events:[wt,"dataBinding","cancel",kt,Ct,St,mt,vt,yt,ft,pt,gt,xt,At,Pt,bt,_t,Et,Mt],setDataSource:function(e){var t=this,n=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),n&&(n.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:Nt,confirmation:Ft,confirmDelete:Ot},commands:{create:Kt.create.text,cancel:Kt.cancel.text,save:Kt.save.text,destroy:Kt.destroy.text,edit:Kt.edit.text,update:Kt.update.text,canceledit:Kt.canceledit.text}}},destroy:function(){var t,n=this;G.fn.destroy.call(n),n._resizeHandler&&e(window).off("resize"+ut,n._resizeHandler),n.pager&&n.pager.element&&n.pager.destroy(),n.pager=null,n.groupable&&n.groupable.element&&n.groupable.element.kendoGroupable("destroy"),n.groupable=null,n.options.reorderable&&n.wrapper.data("kendoReorderable").destroy(),n.selectable&&n.selectable.destroy(),n.resizable&&(n.resizable.destroy(),n._resizeUserEvents&&(n._resizeHandleDocumentClickHandler&&e(document).off("click",n._resizeHandleDocumentClickHandler),n._resizeUserEvents.destroy(),n._resizeUserEvents=null),n.resizable=null),n.virtualScrollable&&n.virtualScrollable.element&&n.virtualScrollable.destroy(),n.virtualScrollable=null,n._destroyColumnAttachments(),n._destroyEditable(),n.dataSource&&(n.dataSource.unbind(wt,n._refreshHandler).unbind(rt,n._progressHandler).unbind(ot,n._errorHandler),n._refreshHandler=n._progressHandler=n._errorHandler=null),t=n.element.add(n.wrapper).add(n.table).add(n.thead).add(n.wrapper.find(">.k-grid-toolbar")),n.content&&(t=t.add(n.content).add(n.content.find(">.k-virtual-scrollable-wrap"))),n.lockedHeader&&n._removeLockedContainers(),n.pane&&n.pane.destroy(),n._draggableInstance&&n._draggableInstance.element&&n._draggableInstance.destroy(),n._draggableInstance=null,t.off(ut),N.destroy(n.wrapper),n.scrollables=n.thead=n.tbody=n.element=n.table=n.content=n.footer=n.wrapper=n._groupableClickHandler=n._setContentWidthHandler=null},setOptions:function(e){var t=this;G.fn.setOptions.call(this,e),t._templates()},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,n,i=N.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=i.length,t=Array(2*e),n=e;--n>=0;)t[n]=t[n+e]=i[n];i=t}return i},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.find("th").each(function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoColumnSorter"),r=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),r&&r.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,n,i=this,r=i.columns||[];for(t=0,n=r.length;n>t;t++)e=r[t].command,e&&c(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),n.length||(n=e("<table />").appendTo(t.element))),$t&&n.attr("cellspacing",0),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,n){var i,o,a,s,l,c=this,d=c.options.columnResizeHandleWidth,h=c.options.scrollable,u=c.resizeHandle;u&&c.lockedContent&&u.data("th")[0]!==n[0]&&(u.remove(),u=null),u||(u=c.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(u)),Gt?(i=n.position().left,h&&(o=n.closest(".k-grid-header-wrap, .k-grid-header-locked"),a=qt.msie?o.scrollLeft():0,s=qt.webkit?o[0].scrollWidth-o[0].offsetWidth-o.scrollLeft():0,l=qt.mozilla?o[0].scrollWidth-o[0].offsetWidth-(o[0].scrollWidth-o[0].offsetWidth-o.scrollLeft()):0,i-=s-l+a)):(i=n[0].offsetWidth,n.prevAll(":visible").each(function(){i+=this.offsetWidth})),u.css({top:h?0:r(c.wrapper),left:i-d,height:n.outerHeight(),width:3*d}).data("th",n).show()},_positionColumnResizeHandle:function(){var t=this,n=t.options.columnResizeHandleWidth,i=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(i).on("mousemove"+ut,"th",function(i){var r,a,s,l=e(this);l.hasClass("k-group-cell")||l.hasClass("k-hierarchy-cell")||(r=i.clientX,a=e(window).scrollLeft(),s=l.offset().left+(Gt?0:this.offsetWidth),r+a>s-n&&s+n>r+a?t._createResizeHandle(l.closest("div"),l):t.resizeHandle?t.resizeHandle.hide():o(t.wrapper,""))})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new N.UserEvents(n.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(n){var i=e(n.target);n.preventDefault(),i.addClass("k-column-active"),t._createResizeHandle(i.closest("div"),i),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=et(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,n,i,r,a,s,l,c=this,d=c.options,h=this._isMobile,u=N.support.mobileOS?0:N.support.scrollbar();d.resizable&&(t=d.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,h?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new H.Resizable(t.add(c.lockedHeader),{handle:".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+c.tbody.attr("clientHeight")})},start:function(t){var u,f,p,g;l=e(t.currentTarget).data("th"),h&&c._hideResizeHandle(),u=e.inArray(l[0],l.parent().children(":visible")),f=l.closest("table"),a=f.parent().hasClass("k-grid-header-locked"),p=a?c.lockedTable:c.table,g=c.footer||e(),c.footer&&c.lockedContent&&(g=c.footer.children(a?".k-grid-footer-locked":".k-grid-footer-wrap")),o(c.wrapper,"col-resize"),s=d.scrollable?f.find("col:eq("+u+")").add(p.children("colgroup").find("col:eq("+u+")")).add(g.find("colgroup").find("col:eq("+u+")")):p.children("colgroup").find("col:eq("+u+")"),n=t.x.location,i=l.outerWidth(),r=a?p.children("tbody").outerWidth():c.tbody.outerWidth()},resize:function(t){var o,h,f,p,g,m,v=Gt?-1:1,y=i+t.x.location*v-n*v;d.scrollable?(a&&c.lockedFooter?o=c.lockedFooter.children("table"):c.footer&&(o=c.footer.find(">.k-grid-footer-wrap>table")),o&&o[0]||(o=e()),h=l.closest("table"),f=a?c.lockedTable:c.table,p=!1,g=c.wrapper.width()-u,m=y,a&&r-i+m>g&&(m=i+(g-r-2*u),0>m&&(m=y),p=!0),m>10&&(s.css("width",m),r&&(m=p?g-2*u:r+t.x.location*v-n*v,f.add(h).add(o).css("width",m),a||(c._footerWidth=m)))):y>10&&s.css("width",y)},resizeend:function(){var e,t,n=l.outerWidth();o(c.wrapper,""),i!=n&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):l.parent(),e=c.columns[t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)],e.width=n,c.trigger(At,{column:e,oldWidth:i,newWidth:n}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:N.guid(),filter:t.content?".k-grid-header:first "+ht:"table:first>.k-grid-header "+ht,drag:function(){t._hideResizeHandle()},hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(N.attr("title"))||t.attr(N.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t=this;t.options.reorderable&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dragOverContainers:function(e){return t.columns[e].lockable!==!1},inSameContainer:function(t,n){return e(t).parent()[0]===e(n).parent()[0]},change:function(e){var n=t.columns[e.oldIndex];t.trigger(Pt,{newIndex:e.newIndex,oldIndex:Z(n,t.columns),column:n}),t.reorderColumn(e.newIndex,n,"before"===e.position)}}))},reorderColumn:function(n,i,r){var o,a,c,h,p=this,g=p.columns,m=Z(i,g),v=g[n],y=Z(i,d(g)),w=Z(v,d(g)),_=w,b=w,x=e(),k=!!v.locked,C=u(g).length,S=p.footer||p.wrapper.find(".k-grid-footer");if(m!==n&&!(!i.locked&&k&&1==f(g).length||i.locked&&!k&&1==C)){for(v.hidden&&(k?(w=p.lockedTable.find("colgroup"),_=p.lockedHeader.find("colgroup"),b=e(p.lockedFooter).find(">table>colgroup")):(w=p.tbody.prev(),_=p.thead.prev(),b=S.find(".k-grid-footer-wrap").find(">table>colgroup"))),h=!!i.locked,h=h!=k,i.locked=k,p._hideResizeHandle(),r===t&&(r=m>n),g.splice(r?n:n+1,0,i),g.splice(n>m?m:m+1,1),p._templates(),s(l(p.lockedHeader,p.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),y,_,r),p.options.scrollable&&s(l(p.lockedTable,p.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),y,w,r),s(l(p.lockedHeader,p.thead,"th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),m,n,r),p._hasFilterRow()&&s(p.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),m,n,r),S&&S.length&&(s(l(p.lockedFooter,S.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),y,b,r),s(S.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),m,n,r)),o=p.tbody.children(":not(.k-grouping-row,.k-detail-row)"),p.lockedTable&&(C>n?m>=C&&T(p.lockedTable.find(">tbody>tr.k-grouping-row"),p.table.find(">tbody>tr.k-grouping-row")):C>m&&T(p.table.find(">tbody>tr.k-grouping-row"),p.lockedTable.find(">tbody>tr.k-grouping-row")),x=p.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),a=0,c=o.length;c>a;a+=1)s(l(x[a],o[a],">td:not(.k-group-cell,.k-hierarchy-cell)"),m,n,r);p._updateTablesWidth(),p._applyLockedContainersWidth(),p._syncLockedContentHeight(),h&&(k?p.trigger(Et,{column:i}):p.trigger(Mt,{column:i}))}},lockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:K(n,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(t=u(n).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:K(n,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=u(n).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=u(this.columns).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+n},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(N.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t,n=this,i=n.selectable&&n.selectable.options.multiple,r=n.options.editable,o=function(){var t=j(),i=n._editContainer;!i||e.contains(i[0],t)||i[0]===t||e(t).closest(".k-animation-container").length||n.editable.end()&&n.closeCell()};r&&(t=n._editMode(),"incell"===t?r.update!==!1&&n.wrapper.on(It+ut,"tr:not(.k-grouping-row) > td",function(t){var r=e(this),o=n.lockedTable&&r.closest("table")[0]===n.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==n.tbody[0]&&!o||e(t.target).is(":input")||(n.editable?n.editable.end()&&(i&&e(j()).blur(),n.closeCell(),n.editCell(r)):n.editCell(r))}).on("focusin"+ut,function(){clearTimeout(n.timer),n.timer=null}).on("focusout"+ut,function(){n.timer=setTimeout(o,1)}):r.update!==!1&&n.wrapper.on(It+ut,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),n.editRow(e(this).closest("tr"))}),r.destroy!==!1?n.wrapper.on(It+ut,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),n.removeRow(e(this).closest("tr"))}):n.wrapper.on(It+ut,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),n._confirmation()||e.preventDefault()}))},editCell:function(t){var n,i,r,o;t=e(t),n=this,i=n.columns[n.cellIndex(t)],r=n._modelForContainer(t),n.closeCell(),!r||r.editable&&!r.editable(i.field)||i.command||!i.field||(n._attachModelChange(r),n._editContainer=t,n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:r,target:n,change:function(e){n.trigger(pt,{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable"),o=t.parent().addClass("k-grid-edit-row"),n.lockedContent&&A(o[0],n._relatedRow(o).addClass("k-grid-edit-row")[0]),n.trigger(ft,{container:t,model:r}))},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?N.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){this.lockedHeader&&this._adjustRowsHeight(this.lockedHeader.children("table"),this.thead.parent())},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(It+ut,"a.k-grid-cancel",e._editCancelClickHandler),t.off(It+ut,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(wt,e._modelChangeHandler)},closeCell:function(t){var n,i,r,o,a=this,s=a._editContainer;s&&(n=s.closest("tr").attr(N.attr("uid")),o=a.dataSource.getByUid(n),t&&a.trigger("cancel",{container:s,model:o})||(s.removeClass("k-edit-cell"),i=a.columns[a.cellIndex(s)],r=s.parent().removeClass("k-grid-edit-row"),a._destroyEditable(),a._displayCell(s,i,o),s.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(s),a.lockedContent&&A(r.css("height","")[0],a._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,n){var i=this,r={storage:{},count:0},o=Q({},N.Template,i.options.templateSettings),a=N.template(i._cellTmpl(t,r),o);r.count>0&&(a=et(a,r.storage)),i.angular("cleanup",function(){return{elements:e.parent()}}),e.empty().html(a(n)),i.angular("compile",function(){return{elements:e.parent(),data:[{dataItem:n}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var n,i=this,r=i._editMode();"incell"!==r&&i.cancelRow(),t=e(t).hide(),n=i._modelForContainer(t),n&&!i.trigger(gt,{row:t,model:n})?(i.dataSource.remove(n),("inline"===r||"popup"===r)&&i.dataSource.sync()):"incell"===r&&i._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(n){var i,r,o,a=this;n instanceof N.data.ObservableObject?i=n:(n=e(n),i=a._modelForContainer(n)),r=a._editMode(),a.cancelRow(),i&&(a._attachModelChange(i),"popup"===r?a._createPopupEditor(i):"inline"===r?a._createInlineEditor(n,i):"incell"===r&&e(n).children(at).each(function(){var n=e(this),r=a.columns[n.index()];return i=a._modelForContainer(n),i&&(!i.editable||i.editable(r.field))&&r.field?(a.editCell(n),!1):t}),o=a.editView?a.editView.element:a._editContainer,this._editCancelClickHandler||(this._editCancelClickHandler=et(this._editCancelClick,this)),o.on(It+ut,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=et(this._editUpdateClick,this)),o.on(It+ut,"a.k-grid-update",this._editUpdateClickHandler))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var n,i=this,r=i.options.navigatable,o=i.editable.options.model,a=i.editView?i.editView.element:i._editContainer;t.preventDefault(),t.stopPropagation(),i.trigger("cancel",{container:a,model:o})||(n=i.items().index(e(i.current()).parent()),i.cancelRow(),r&&(i.current(i.items().eq(n).children().filter(ct).first()),E(i.table,!0)))},_createPopupEditor:function(n){var i,r,o,a,s,l,c,d,h,u,f,p=this,g="<div "+N.attr("uid")+'="'+n.uid+'" class="k-popup-edit-form'+(p._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',m=[],v=p.options.editable,y=v.template,w=$(v)?v.window:{},_=Q({},N.Template,p.options.templateSettings);if(w=w||{},y)for(typeof y===Rt&&(y=window.unescape(y)),g+=N.template(y,_)(n),o=0,a=p.columns.length;a>o;o++)i=p.columns[o],i.command&&(d=P(i.command,"edit"),d&&(r=d));else for(o=0,a=p.columns.length;a>o;o++)i=p.columns[o],i.command?i.command&&(d=P(i.command,"edit"),d&&(r=d)):(g+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>",n.editable&&!n.editable(i.field)||!i.field?(u={storage:{},count:0},s=N.template(p._cellTmpl(i,u),_),u.count>0&&(s=et(s,u.storage)),g+='<div class="k-edit-field">'+s(n)+"</div>"):(m.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),g+="<div "+N.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'));r&&$(r)&&(r.text&&$(r.text)&&(l=r.text.update,c=r.text.cancel),r.attr&&(h=r.attr)),p._isMobile?(g+="</div></div>",p.editView=p.pane.append("<div data-"+N.ns+'role="view" data-'+N.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+N.ns+'role="header" class="k-header">'+p._createButton({name:"update",text:l,attr:h})+(w.title||"Edit")+p._createButton({name:"canceledit",text:c,attr:h})+"</div>"+g+"</div>"),f=p._editContainer=p.editView.element.find(".k-popup-edit-form")):(g+='<div class="k-edit-buttons k-state-default">',g+=p._createButton({name:"update",text:l,attr:h})+p._createButton({name:"canceledit",text:c,attr:h}),g+="</div></div></div>",f=p._editContainer=e(g).appendTo(p.wrapper).eq(0).kendoWindow(Q({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(i.sender.element.focus(),p.trigger("cancel",{container:f,model:n}))return i.preventDefault(),t;
var r=p.items().index(e(p.current()).parent());p.cancelRow(),p.options.navigatable&&(p.current(p.items().eq(r).children().filter(ct).first()),E(p.table,!0))}}},w))),p.editable=p._editContainer.kendoEditable({fields:m,model:n,clearContainer:!1,target:p}).data("kendoEditable"),p._isMobile&&f.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),p._openPopUpEditor(),p.trigger(ft,{container:f,model:n})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,n){var i,r,o,a=this,s=[];a.lockedContent&&(t=t.add(a._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(r=e(this),i=a.columns[a.cellIndex(r)],i.command||!i.field||n.editable&&!n.editable(i.field)){if(i.command&&(o=P(i.command,"edit"))){r.empty();var t,l,c;$(o)&&(o.text&&$(o.text)&&(t=o.text.update,l=o.text.cancel),o.attr&&(c=o.attr)),e(a._createButton({name:"update",text:t,attr:c})+a._createButton({name:"canceledit",text:l,attr:c})).appendTo(r)}}else s.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),r.attr(N.attr("container-for"),i.field),r.empty()}),a._editContainer=t,a.editable=new N.ui.Editable(t.addClass("k-grid-edit-row"),{target:a,fields:s,model:n,clearContainer:!1}),t.length>1&&(A(t[0],t[1]),a._applyLockedContainersWidth()),a.trigger(ft,{container:t,model:n})},cancelRow:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t._destroyEditable(),t.dataSource.cancelChanges(e),t._displayRow("popup"!==t._editMode()?n:t.tbody.find("["+N.attr("uid")+"="+e.uid+"]")))},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger(pt,{container:t,model:n})&&e.dataSource.sync()},_displayRow:function(t){var n,i,r,o=this,a=o._modelForContainer(t),s=t.hasClass("k-alt");a&&(o.lockedContent&&(n=e((s?o.lockedAltRowTemplate:o.lockedRowTemplate)(a)),o._relatedRow(t.last()).replaceWith(n)),o.angular("cleanup",function(){return{elements:t.get()}}),i=e((s?o.altRowTemplate:o.rowTemplate)(a)),t.replaceWith(i),o.angular("compile",function(){return{elements:i.get(),data:[{dataItem:a}]}}),n&&A(i[0],n[0]),r=i.next(),r.hasClass("k-detail-row")&&r.is(":visible")&&i.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,n){var i,r,o,a=this;return a._isMobile?(i=N.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),r=e(i(t)).appendTo(a.view.element),o=a._actionSheet=new N.mobile.ui.ActionSheet(r,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){var i=e(t.currentTarget).parent();i.hasClass("km-actionsheet-cancel")||a._removeRow(n)},popup:a._actionSheetPopupOptions}),o.open(n),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,n=t.options.editable,i=n===!0||typeof n===Rt?t.options.messages.editable.confirmation:n.confirmation;return i!==!1&&null!=i?(typeof i===Bt&&(i=i(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:i===!0?t.options.messages.editable.confirmation:i},e)):!0},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger(xt)&&e.dataSource.sync()},addRow:function(){var e,t,n,i,r,o,a=this,s=a.dataSource,l=a._editMode(),c=a.options.editable.createAt||"",d=s.pageSize(),h=s.view()||[];(a.editable&&a.editable.end()||!a.editable)&&("incell"!=l&&a.cancelRow(),e=s.indexOf(h[0]),"bottom"==c.toLowerCase()&&(e+=h.length,d&&!s.options.serverPaging&&h.length>=d&&(e-=1)),0>e&&(e=s.page()>s.totalPages()?(s.page()-1)*d:0),t=s.insert(e,{}),n=t.uid,i=a.lockedContent?a.lockedTable:a.table,r=i.find("tr["+N.attr("uid")+"="+n+"]"),o=r.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(a._firstEditableColumnIndex(r)),"inline"===l&&r.length?a.editRow(r):"popup"===l?a.editRow(t):o.length&&a.editCell(o),"bottom"==c.toLowerCase()&&a.lockedContent&&(a.lockedContent[0].scrollTop=a.content[0].scrollTop=a.content[0].offsetHeight))},_firstEditableColumnIndex:function(e){var t,n,i,r=this,o=r.columns,a=r._modelForContainer(e);for(n=0,i=o.length;i>n;n++)if(t=o[n],a&&(!a.editable||a.editable(t.field))&&!t.command&&t.field)return n;return-1},_toolbar:function(){var t,n=this,i=n.wrapper,r=n.options.toolbar,o=n.options.editable;r&&(t=n.wrapper.find(".k-grid-toolbar"),t.length||(tt(r)||(r=typeof r===Rt?r:n._toolbarTmpl(r).replace(Vt,"\\#"),r=et(N.template(r),n)),t=e('<div class="k-header k-grid-toolbar" />').html(r({})).prependTo(i),n.angular("compile",function(){return{elements:t.get()}})),o&&o.create!==!1&&t.on(It+ut,".k-grid-add",function(e){e.preventDefault(),n.addRow()}).on(It+ut,".k-grid-cancel-changes",function(e){e.preventDefault(),n.cancelChanges()}).on(It+ut,".k-grid-save-changes",function(e){e.preventDefault(),n.saveChanges()}))},_toolbarTmpl:function(e){var t,n,i=this,r="";if(X(e))for(t=0,n=e.length;n>t;t++)r+=i._createButton(e[t]);return r},_createButton:function(e){var n,r=e.template||jt,o=typeof e===Rt?e:e.name||e.text,a=Kt[o]?Kt[o].className:"k-grid-"+(o||"").replace(/\s/g,""),s={className:a,text:o,imageClass:"",attr:"",iconClass:""},l=this.options.messages.commands;if(!(o||$(e)&&e.template))throw Error("Custom commands should have name specified");return $(e)?(e.className&&Z(s.className,e.className.split(" "))<0?e.className+=" "+s.className:e.className===t&&(e.className=s.className),"edit"===o&&$(e.text)&&(e=Q(!0,{},e),e.text=e.text.edit),e.attr&&($(e.attr)&&(e.attr=i(e.attr)),typeof e.attr===Rt&&(n=e.attr.match(/class="(.+?)"/),n&&Z(n[1],e.className.split(" "))<0&&(e.className+=" "+n[1]))),s=Q(!0,s,Kt[o],{text:l[o]},e)):s=Q(!0,s,Kt[o],{text:l[o]}),N.template(r)(s)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(It+ut,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),r=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(It+ut,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(It+ut,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,i=t.options.groupable,r=ht+":visible["+N.attr("field")+"]",o=ht+"["+N.attr("field")+"]";i&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new U(n,Q({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:t.content?".k-grid-header:first "+r:"table:first>.k-grid-header "+r,filter:t.content?".k-grid-header:first "+o:"table:first>.k-grid-header "+o,allowDrag:t.options.reorderable})))},_continuousItems:function(t,n){var i,r,o,a,s,l,c,d;if(this.lockedContent){for(i=this,r=i.table.add(i.lockedTable),o=e(t,r[0]),a=e(t,r[1]),s=n?u(i.columns).length:1,l=n?i.columns.length-s:1,c=[],d=0;o.length>d;d+=s)J.apply(c,o.slice(d,d+s)),J.apply(c,a.splice(0,l));return c}},_selectable:function(){var n,i,r,o,a=this,s=[],l=a._isLocked(),c=a.options.selectable;c&&(a.selectable&&a.selectable.destroy(),n=typeof c===Rt&&c.toLowerCase().indexOf("multiple")>-1,i=typeof c===Rt&&c.toLowerCase().indexOf("cell")>-1,a._hasDetails()&&(s[s.length]=".k-detail-row"),(a.options.groupable||a._hasFooters())&&(s[s.length]=".k-grouping-row,.k-group-footer"),s=s.join(","),""!==s&&(s=":not("+s+")"),r=a.table,l&&(r=r.add(a.lockedTable)),o=">"+(i?st:"tbody>tr"+s),a.selectable=new N.ui.Selectable(r,{filter:o,aria:!0,multiple:n,change:function(){a.trigger(wt)},useAllItems:l&&n&&i,relatedTarget:function(t){var n,r,o,s;if(!i&&l){for(r=e(),o=0,s=t.length;s>o;o++)n=a._relatedRow(t[o]),Z(n[0],t)<0&&(r=r.add(n));return r}},continuousItems:function(){return a._continuousItems(o,i)}}),a.options.navigatable&&r.on("keydown"+ut,function(o){var s=a.current(),c=o.target;if(o.keyCode===q.SPACEBAR&&e.inArray(c,r)>-1&&!s.is(".k-edit-cell,.k-header")&&s.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),s=i?s:s.parent(),l&&!i&&(s=s.add(a._relatedRow(s))),n)if(o.ctrlKey){if(s.hasClass(Dt))return s.removeClass(Dt),a.trigger(wt),t}else a.selectable.clear();else a.selectable.clear();a.selectable.value(s)}}))},_relatedRow:function(t){var n,i,r=this.lockedTable;return t=e(t),r?(n=t.closest(this.table.add(this.lockedTable)),i=n.find(">tbody>tr").index(t),n=n[0]===this.table[0]?r:this.table,n.find(">tbody>tr").eq(i)):t},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(wt)},select:function(n){var i=this,r=i.selectable;return n=e(n),n.length?(r.options.multiple||(r.clear(),n=n.first()),i._isLocked()&&(n=n.add(n.map(function(){return i._relatedRow(this)}))),r.value(n),t):r.value()},current:function(e){var n,i=this,r=i.options.scrollable,o=i._current,a=i.table.add(i.thead.parent());return e!==t&&e.length&&(o&&o[0]===e[0]||(o&&(o.removeClass(Tt).removeAttr("id"),a.removeAttr("aria-activedescendant")),e.attr("id",i._cellId),i._current=e.addClass(Tt),a.attr("aria-activedescendant",i._cellId),e.length&&r&&(n=e.closest("table").parent(),n.is(".k-grid-content")?i._scrollTo(e.parent()[0],i.content[0]):n.is(".k-grid-content-locked")&&(i._scrollTo(i._relatedRow(e.parent())[0],i.content[0]),i.lockedContent[0].scrollTop=i.content[0].scrollTop),n.is(".k-grid-content-locked,.k-grid-header-locked")||(r.virtual?i._scrollTo(e[0],i.content.find(">.k-virtual-scrollable-wrap")[0]):i._scrollTo(e[0],i.content[0]))))),i._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Tt),this._current=null)},_scrollTo:function(e,t){var n=e.tagName.toLowerCase(),i="td"===n||"th"===n,r=e[i?"offsetLeft":"offsetTop"],o=e[i?"offsetWidth":"offsetHeight"],a=t[i?"scrollLeft":"scrollTop"],s=t[i?"clientWidth":"clientHeight"],l=r+o,c=0;c=a>r?r:l>a+s?s>=o?l-s:r:a,t[i?"scrollLeft":"scrollTop"]=c},_navigatable:function(){var t=this,n=et(t.current,t),i=t.table.add(t.lockedTable),r=t.thead.parent().add(e(">table",t.lockedHeader)),o=(t._isLocked(),i),a=N.support.isRtl(t.element);t.options.navigatable&&(t.options.scrollable&&(o=i.add(r),r.attr(zt,-1)),o.off("mousedown"+ut+" focus"+ut+" focusout"+ut+" keydown"+ut),r.on("keydown"+ut,function(e){e.altKey&&e.keyCode==q.DOWN&&(n().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())}).find("a.k-link").attr("tabIndex",-1),i.attr(zt,it.max(i.attr(zt)||0,0)).on("mousedown"+ut+" keydown"+ut,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),o.on(N.support.touch?"touchstart"+ut:"mousedown"+ut,lt+">"+ct,et(M,t)).on("focus"+ut,function(){if(!N.support.touch){var t=n();t&&t.is(":visible")?t.addClass(Tt):n(e(this).find(dt)),i.attr(zt,-1),r.attr(zt,-1),e(this).attr(zt,0)}}).on("focusout"+ut,function(){var e=n();e&&e.removeClass(Tt)}).on("keydown"+ut,function(o){var s,l,c,d,h,u=o.keyCode,f=!1,p=!o.isDefaultPrevented()&&!e(o.target).is(":button,a,:input,a>.k-icon"),g=t.options.pageable,m=t.dataSource,v="incell"==t._editMode(),y=o.shiftKey,w=et(t._relatedRow,t),_=n();_&&_.is("th")&&(p=!0),p&&u==q.UP?(n(L(_,o.currentTarget,i,r,!0)),f=!0):p&&u==q.DOWN?(n(L(_,o.currentTarget,i,r)),f=!0):p&&u==(a?q.RIGHT:q.LEFT)?(n(z(_,o.currentTarget,i,r,w)),f=!0):p&&u==(a?q.LEFT:q.RIGHT)?(n(B(_,o.currentTarget,i,r,w)),f=!0):p&&g&&q.PAGEDOWN==u?(m.page(m.page()+1),f=!0):p&&g&&q.PAGEUP==u?(m.page(m.page()-1),f=!0):u==q.ENTER||q.F2==u?(_=_?_:i.find(dt),e(o.target).is("table")||e.contains(_[0],o.target)||(_=e(o.target).closest("[role=gridcell]")),_.is("th")?(_.find(".k-link").click(),f=!0):_.parent().is(".k-master-row,.k-grouping-row")?(_.parent().find(".k-icon:first").click(),f=!0):(c=_.find(":kendoFocusable:first"),!_.hasClass("k-edit-cell")&&c[0]&&_.hasClass("k-state-focused")?(c.focus(),f=!0):t.options.editable&&!e(o.target).is(":button,.k-button,textarea")&&(d=e(o.target).closest("[role=gridcell]"),d[0]||(d=_),t._handleEditing(d,!1,v?o.currentTarget:i[0]),f=!0))):q.ESC==u?(s=j(),_&&e.contains(_[0],s)&&!_.hasClass("k-edit-cell")&&!_.parent().hasClass("k-grid-edit-row")?(E(o.currentTarget,!0),f=!0):!t._editContainer||_&&!t._editContainer.has(_[0])&&_[0]!==t._editContainer[0]||(v?t.closeCell(!0):(l=e(_).parent().index(),s&&s.blur(),t.cancelRow(),l>=0&&t.current(i.find(">tbody>tr").eq(l).children().filter(ct).first())),qt.msie&&9>qt.version&&document.body.focus(),E(v?o.currentTarget:i[0],!0),f=!0)):q.TAB==u&&(_=e(_),t.options.editable&&v&&(h=e(j()).closest(".k-edit-cell"),h[0]&&h[0]!==_[0]&&(_=h)),h=R(_,o.currentTarget,i,w,y),!_.is("th")&&h.length&&t.options.editable&&v&&(t._handleEditing(_,h,h.closest(i)),f=!0)),f&&(o.preventDefault(),o.stopPropagation())}))},_handleEditing:function(n,i,r){var o,a,s=this,l=e(j()),c=s._editMode(),d=qt.msie,h=d&&9>qt.version,u=s._editContainer;if(r=e(r),a="incell"==c?n.hasClass("k-edit-cell"):n.parent().hasClass("k-grid-edit-row"),s.editable){if(e.contains(u[0],l[0])&&(qt.opera||h?l.change().triggerHandler("blur"):(l.blur(),d&&l.blur())),!s.editable)return E(r),t;if(!s.editable.end())return s.current("incell"==c?u:u.children().filter(at).first()),o=u.find(":kendoFocusable:first")[0],o&&o.focus(),t;"incell"==c?s.closeCell():(s.saveRow(),a=!0)}i&&s.current(i),h&&document.body.focus(),E(r,!0),(!a&&!i||i)&&("incell"==c?s.editCell(s.current()):s.editRow(s.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget"),n&&(e.wrapper.css(Lt,n),t.css(Lt,"auto")),e._initMobile()},_initMobile:function(){var t,n=this.options,i=this;this._isMobile=n.mobile===!0&&N.support.mobileOS||"phone"===n.mobile||"tablet"===n.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+N.ns+'role="view" data-'+N.ns+'init-widgets="false"></div>').parent(),this.pane=N.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},n.height&&this.pane.element.parent().css(Lt,n.height),this._editAnimation="slide",this.view.bind("show",function(){i._isLocked()&&(i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._syncLockedFooterHeight())}))},_tbody:function(){var t,n=this,i=n.table;t=i.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(i)),n.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,n,i,r,o=this,a=o.options,s=a.scrollable,l=s!==!0&&s.virtual&&!o.virtualScrollable,c=!N.support.kineticScrollNeeded||l?N.support.scrollbar():0;s&&(t=o.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(o.table)),t.css(Gt?"padding-left":"padding-right",s.virtual?c+1:c),n=e('<table role="grid" />'),$t&&n.attr("cellspacing",0),n.append(o.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(n)),o.content=o.table.parent(),o.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(o.content=o.content.parent()),o.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(o.content=o.table.wrap('<div class="k-grid-content" />').parent()),l&&(o.virtualScrollable=new Yt(o.content,{dataSource:o.dataSource,itemHeight:function(){return o._averageRowHeight()}})),o.scrollables=t.children(".k-grid-header-wrap"),i=o.wrapper.find(".k-grid-footer"),i.length&&(o.scrollables=o.scrollables.add(i.children(".k-grid-footer-wrap"))),s.virtual?o.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+ut).bind("scroll"+ut,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}):(o.content.unbind("scroll"+ut).bind("scroll"+ut,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}),r=o.content.data("kendoTouchScroller"),r&&r.destroy(),r=N.touchScroller(o.content),r&&r.movable&&(o.touchScroller=r,r.movable.bind("change",function(e){o.scrollables.scrollLeft(-e.sender.x),o.lockedContent&&o.lockedContent.scrollTop(-e.sender.y)}),o.one(kt,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_setContentWidth:function(){var t,n=this,i="k-grid-content-expander",r='<div class="'+i+'"></div>',o=n.resizable;n.options.scrollable&&n.wrapper.is(":visible")&&(t=n.table.parent().children("."+i),n._setContentWidthHandler=et(n._setContentWidth,n),n.dataSource&&n.dataSource.view().length?t[0]&&(t.remove(),o&&o.unbind("resize",n._setContentWidthHandler)):(t[0]||(t=e(r).appendTo(n.table.parent()),o&&o.bind("resize",n._setContentWidthHandler)),n.thead&&t.width(n.thead.width())),n._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),n=t.parent(),i=this.wrapper[0].clientWidth,r=this._groups(),o=N.support.scrollbar(),a=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=h(a),c=h(s);r>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*r),l>=i&&(l=i-3*o),this.lockedHeader.add(this.lockedContent).width(l),n[0].style.width=n.parent().width()-l-2+"px",t.add(this.table).width(c),this.virtualScrollable&&(i-=o),this.content[0].style.width=i-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=n[0].clientWidth+"px",e.children().first().width(c))}},_setContentHeight:function(){var e,t=this,n=t.options,i=t.wrapper.innerHeight(),r=t.wrapper.children(".k-grid-header"),o=N.support.scrollbar();n.scrollable&&t.wrapper.is(":visible")&&(i-=r.outerHeight(),t.pager&&(i-=t.pager.element.outerHeight()),n.groupable&&(i-=t.wrapper.children(".k-grouping-header").outerHeight()),n.toolbar&&(i-=t.wrapper.children(".k-grid-toolbar").outerHeight()),t.footerTemplate&&(i-=t.wrapper.children(".k-grid-footer").outerHeight()),e=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},e(t.wrapper)&&(i>2*o?(t.lockedContent&&(o=t.table[0].offsetWidth>t.table.parent()[0].clientWidth?o:0,t.lockedContent.height(i-o)),t.content.height(i)):t.content.height(2*o+1)))},_averageRowHeight:function(){var e,t=this,n=t._items(t.tbody).length,i=t._rowHeight;return 0===n?i:(t._rowHeight||(t._rowHeight=i=t.table.outerHeight()/n,t._sum=i,t._measures=1),e=t.table.outerHeight()/n,i!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),i)},_dataSource:function(){var e,n=this,i=n.options,r=i.dataSource;r=X(r)?{data:r}:r,$(r)&&(Q(r,{table:n.table,fields:n.columns}),e=i.pageable,$(e)&&e.pageSize!==t&&(r.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(wt,n._refreshHandler).unbind(rt,n._progressHandler).unbind(ot,n._errorHandler):(n._refreshHandler=et(n.refresh,n),n._progressHandler=et(n._requestStart,n),n._errorHandler=et(n._error,n)),n.dataSource=V.create(r).bind(wt,n._refreshHandler).bind(rt,n._progressHandler).bind(ot,n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,r,o,a,s=this,l=s.tbody,c=t.model,d=s.tbody.find("tr["+N.attr("uid")+"="+c.uid+"]"),h=d.hasClass("k-alt"),u=s._items(l).index(d),f=s.lockedContent;if(f&&(n=s._relatedRow(d)),d.add(n).children(".k-edit-cell").length&&!s.options.rowTemplate)d.add(n).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){i=e(this),r=s.columns[s.cellIndex(i)],r.field===t.field&&(i.hasClass("k-edit-cell")?i.addClass("k-dirty-cell"):(s._displayCell(i,r,c),e('<span class="k-dirty"/>').prependTo(i)))});else if(!d.hasClass("k-grid-edit-row")){for(f&&(o=(h?s.lockedAltRowTemplate:s.lockedRowTemplate)(c),n.replaceWith(o)),o=(h?s.altRowTemplate:s.rowTemplate)(c),d.replaceWith(o),o=s._items(l).eq(u),f&&(n=s._relatedRow(o)[0],A(o[0],n),o=o.add(n)),u=0,a=s.columns.length;a>u;u++)r=s.columns[u],r.field===t.field&&(i=o.children(":not(.k-group-cell,.k-hierarchy-cell)").eq(u),e('<span class="k-dirty"/>').prependTo(i));s.trigger("itemChange",{item:o,data:c,ns:H})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&(t=n.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),n.pager="object"==typeof i&&i instanceof N.ui.Pager?i:new N.ui.Pager(t,Q({},i,{dataSource:n.dataSource})))},_footer:function(){var t,n,i,r,o=this,s=o.dataSource.aggregates(),l="",c=o.footerTemplate,d=o.options,h=o.footer||o.wrapper.find(".k-grid-footer");c?(s=nt(s)?a(o.dataSource.aggregate()):s,l=e(o._wrapFooter(c(s))),h.length?(n=l,o.angular("cleanup",function(){return{elements:h.get()}}),h.replaceWith(n),h=o.footer=n):h=o.footer=d.scrollable?d.pageable?l.insertBefore(o.wrapper.children("div.k-grid-pager")):l.appendTo(o.wrapper):l.insertBefore(o.tbody),o.angular("compile",function(){return{elements:h.find("td").get(),data:Y(o.columns,function(e){return{column:e,aggregate:s[e.field]}})}})):h&&!o.footer&&(o.footer=h),h.length&&(d.scrollable&&(t=h.attr("tabindex",-1).children(".k-grid-footer-wrap"),o.scrollables=o.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),o._footerWidth&&h.find("table").css("width",o._footerWidth),t&&(i=o.content.scrollLeft(),r=d.scrollable!==!0&&d.scrollable.virtual&&!o.virtualScrollable,r&&(i=o.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(i))),o.lockedContent&&(o._appendLockedColumnFooter(),o._applyLockedContainersWidth(),o._syncLockedFooterHeight())},_wrapFooter:function(t){var n=this,i="",r=N.support.mobileOS?0:N.support.scrollbar();return n.options.scrollable?(i=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+($t?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),n._appendCols(i.find("table")),i.css(Gt?"padding-left":"padding-right",r),i):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,t,n,i,r,o,a,s,l,c=this,d=c.columns,h=c.options,f=h.columnMenu,p=this._isMobile,g=function(e){c.trigger(yt,{field:e.field,container:e.container})},m=function(e){E(e.closest("table"),!0)};if(f)for("boolean"==typeof f&&(f={}),o=c.thead.find("tr:first th:not(.k-hierarchy-cell):not(.k-group-cell)"),a=0,s=o.length;s>a;a++)t=d[a],l=o.eq(a),t.command||!t.field&&!l.attr("data-"+N.ns+"field")||(e=l.data("kendoColumnMenu"),e&&e.destroy(),i=t.sortable!==!1&&f.sortable!==!1&&h.sortable!==!1?Q({},h.sortable,{compare:(t.sortable||{}).compare}):!1,r=h.filterable&&t.filterable!==!1&&f.filterable!==!1?Q({pane:c.pane},t.filterable,h.filterable):!1,n={dataSource:c.dataSource,values:t.values,columns:f.columns,sortable:i,filterable:r,messages:f.messages,owner:c,closeCallback:m,init:g,pane:c.pane,filter:p?":not(.k-column-active)":"",lockedColumns:t.lockable!==!1&&u(d).length>0},l.kendoColumnMenu(n))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,n,i,r,o,a,s=this,l=s.columns,c=function(e){s.trigger(vt,{field:e.field,container:e.container})},d=function(e){E(e.closest("table"),!0)},h=s.options.filterable;if(h&&typeof h.mode==Rt&&-1==h.mode.indexOf("menu")&&(h=!1),h&&!s.options.columnMenu)for(t=s._headerCells(),i=0,r=t.length;r>i;i++)n=t.eq(i),l[i].filterable===!1||l[i].command||!l[i].field&&!n.attr("data-"+N.ns+"field")||(e=n.data("kendoFilterMenu"),e&&e.destroy(),o=l[i].filterable,a=Q({},h,o,{dataSource:s.dataSource,values:l[i].values,closeCallback:d,init:c,pane:s.pane}),o&&o.messages&&(a.messages=Q(!0,{},h.messages,o.messages)),n.kendoFilterMenu(a))},_filterRow:function(){var t,n,i,r,o,a,s,l,c,d,h,u,f=this;if(f._hasFilterRow())for(t=f.columns,n=f.options.filterable,i=f.thead.find(".k-filter-row"),this._updateHeader(this.dataSource.group().length),r=0;t.length>r;r++)if(a=t[r],s=f.options.filterable.operators,l=!1,c=e("<th/>"),d=a.field,a.hidden&&c.hide(),i.append(c),d&&a.filterable!==!1){if(h=a.filterable&&a.filterable.cell||{},o=f.options.dataSource,u=Q(!0,{},n.messages),a.filterable&&Q(!0,u,a.filterable.messages),h.enabled===!1){c.html("&nbsp;");continue}h.dataSource&&(o=h.dataSource,l=!0),a.filterable&&a.filterable.operators&&(s=a.filterable.operators),e("<span/>").attr(N.attr("field"),d).kendoFilterCell({dataSource:f.dataSource,suggestDataSource:o,customDataSource:l,field:d,messages:u,values:a.values,template:h.template,delay:h.delay,inputWidth:h.inputWidth,suggestionOperator:h.suggestionOperator,minLength:h.minLength,dataTextField:h.dataTextField,operator:h.operator,operators:s,showOperators:h.showOperators}).appendTo(c)}else c.html("&nbsp;")},_sortable:function(){var e,t,n,i,r,o,a=this,s=a.columns,l=a.options.sortable;if(l){for(i=a._headerCells(),r=0,o=i.length;o>r;r++)e=s[r],e.sortable!==!1&&!e.command&&e.field&&(n=i.eq(r),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr("data-"+N.ns+"field",e.field).kendoColumnSorter(Q({},l,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)"})));i=null}},_columns:function(t){var n,i,r,o=this,a=o.table,s=a.find("col"),l=o.options.dataSource;if(t=t.length?t:Y(a.find("th"),function(t,n){t=e(t);var i=t.attr(N.attr("sortable")),r=t.attr(N.attr("filterable")),o=t.attr(N.attr("type")),a=t.attr(N.attr("groupable")),l=t.attr(N.attr("field")),c=t.attr(N.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:o,sortable:"false"!==i,filterable:"false"!==r,groupable:"false"!==a,menu:c,template:t.attr(N.attr("template")),width:s.eq(n).css("width")}}),n=!(o.table.find("tbody tr").length>0&&(!l||!l.transport)),o.options.scrollable){if(r=t,i=u(t),t=f(t),i.length>0&&0===t.length)throw Error("There should be at least one non locked columns");_(o.element.find("tr:has(th):first").find("th:not(.k-group-cell)"),r),t=i.concat(t)}o.columns=Y(t,function(e){return e=typeof e===Rt?{field:e}:e,e.hidden&&(e.attributes=v(e.attributes),e.footerAttributes=v(e.footerAttributes),e.headerAttributes=v(e.headerAttributes)),Q({encoded:n},e)})},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,r,o){var a,s,l,c,d=this,h=Q({},N.Template,d.options.templateSettings),u=t.length,f={storage:{},count:0},p=d._hasDetails(),g=[],m=d._groups();if(!e){for(e="<tr",r&&g.push("k-alt"),p&&g.push("k-master-row"),g.length&&(e+=' class="'+g.join(" ")+'"'),u&&(e+=" "+N.attr("uid")+'="#='+N.expr("uid",h.paramName)+'#"'),e+=" role='row'>",m>0&&!o&&(e+=n(m)),p&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),a=0;u>a;a++)l=t[a],s=l.template,c=typeof s,e+="<td"+i(l.attributes)+" role='gridcell'>",e+=d._cellTmpl(l,f),e+="</td>";e+="</tr>"}return e=N.template(e,h),f.count>0?et(e,f.storage):e},_headerCellText:function(e){var t=this,n=Q({},N.Template,t.options.templateSettings),i=e.headerTemplate,r=typeof i,o=e.title||e.field||"";return r===Bt?o=N.template(i,n)({}):r===Rt&&(o=i),o},_cellTmpl:function(e,t){var n,i,r=this,o=Q({},N.Template,r.options.templateSettings),a=e.template,s=o.paramName,l=e.field,c="",d=e.format,h=typeof a,u=e.values;if(e.command){if(X(e.command)){for(n=0,i=e.command.length;i>n;n++)c+=r._createButton(e.command[n]);return c.replace(Vt,"\\#")}return r._createButton(e.command).replace(Vt,"\\#")}return h===Bt?(t.storage["tmpl"+t.count]=a,c+="#=this.tmpl"+t.count+"("+s+")#",t.count++):h===Rt?c+=a:u&&u.length&&$(u[0])&&"value"in u[0]&&l?(c+="#var v ="+N.stringify(b(u)).replace(Vt,"\\#")+"#",c+="#var f = v[",o.useWithBlock||(c+=s+"."),c+=l+"]#",c+="${f != null ? f : ''}"):(c+=e.encoded?"#:":"#=",d&&(c+='kendo.format("'+d.replace(Ht,"\\$1")+'",'),l?(l=N.expr(l,s),c+=l+"==null?'':"+l):c+="''",d&&(c+=")"),c+="#"),c},_templates:function(){var t=this,n=t.options,i=t.dataSource,r=i.group(),o=t.footer||t.wrapper.find(".k-grid-footer"),a=i.aggregate(),s=u(t.columns),l=n.scrollable?f(t.columns):t.columns;if(n.scrollable&&s.length){if(n.rowTemplate||n.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(n.rowTemplate,l,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,l),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!nt(a)||!nt(a)&&!o.length||K(t.columns,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(t.columns,a,"footerTemplate","k-footer-template")),r&&K(t.columns,function(e){return e.groupFooterTemplate}).length&&(a=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(l,a,"groupFooterTemplate","k-group-footer",s.length),n.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,a,"groupFooterTemplate","k-group-footer")))},_footerTmpl:function(e,t,r,o,s){var l,c,d,h,u,f=this,p=Q({},N.Template,f.options.templateSettings),g=p.paramName,m="",v={},y=0,w={},_=f._groups(),b=a(t);for(m+='<tr class="'+o+'">',_>0&&!s&&(m+=n(_)),f._hasDetails()&&(m+='<td class="k-hierarchy-cell">&nbsp;</td>'),l=0,c=e.length;c>l;l++)u=e[l],d=u[r],h=typeof d,m+="<td"+i(u.footerAttributes)+">",d?(h!==Bt&&(w=b[u.field]?Q({},p,{paramName:g+"['"+u.field+"']"}):{},d=N.template(d,w)),v["tmpl"+y]=d,m+="#=this.tmpl"+y+"("+g+")#",y++):m+="&nbsp;",m+="</td>";return m+="</tr>",m=N.template(m,p),y>0?et(m,v):m},_detailTmpl:function(e){var t=this,i="",r=Q({},N.Template,t.options.templateSettings),o=r.paramName,a={},s=0,l=t._groups(),c=d(t.columns).length,h=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(c?' colspan="'+c+'"':"")+">",h===Bt?(a["tmpl"+s]=e,i+="#=this.tmpl"+s+"("+o+")#",s++):i+=e,i+="</td></tr>",i=N.template(i,r),s>0?et(i,a):i},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[mt]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==Rt&&-1!=t.mode.indexOf("row"),i=this.columns,r=e.grep(i,function(e){return e.filterable===!1});return i.length&&r.length==i.length&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&u(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(It+ut,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(n){var i,r,o=e(this),a=o.hasClass("k-plus"),s=o.closest("tr.k-master-row"),l=t.detailTemplate,c=t._hasDetails();return o.toggleClass("k-plus",!a).toggleClass("k-minus",a),i=s.next(),c&&!i.hasClass("k-detail-row")&&(r=t.dataItem(s),i=e(l(r)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.angular("compile",function(){return{elements:i.get(),data:[{dataItem:r}]}}),t.trigger(mt,{masterRow:s,detailRow:i,data:r,detailCell:i.find(".k-detail-cell")})),t.trigger(a?Ct:St,{masterRow:s,detailRow:i}),i.toggle(a),t._current&&t._current.attr("aria-expanded",a),n.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var n,i,r=this.tbody.children(),o=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;
for(i=a,n=0;a>n;n++)o.test(r[n].className)&&i--;return this._data[i]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e){var n,r,o,a,s=this,l="";for(n=0,a=e.length;a>n;n++)r=e[n],o=s._headerCellText(r),r.command?l+="<th"+i(r.headerAttributes)+">"+o+"</th>":(l+="<th role='columnheader' "+N.attr("field")+"='"+(r.field||"")+"' ",r.title&&(l+=N.attr("title")+'="'+r.title.replace(/'/g,"'")+'" '),r.groupable!==t&&(l+=N.attr("groupable")+"='"+r.groupable+"' "),r.aggregates&&r.aggregates.length&&(l+=N.attr("aggregates")+"='"+r.aggregates+"'"),l+=i(r.headerAttributes),l+=">"+o+"</th>");return l},_appendLockedColumnContent:function(){var t,n,i,r=this.columns,o=this.table.find("colgroup"),a=o.find("col:not(.k-group-col,.k-hierarchy-col)"),s=e(),l=0;for(t=0,n=r.length;n>t;t++)r[t].locked&&(r[t].hidden?l++:s=s.add(a.eq(t-l)));i=e('<div class="k-grid-content-locked"><table'+($t?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),o.detach(),i.find("colgroup").append(s),o.insertBefore(this.table.find("tbody")),this.lockedContent=i.insertBefore(this.content),this.lockedTable=i.children("table")},_appendLockedColumnFooter:function(){var t,n,i=this,r=i.footer,o=r.find(".k-footer-template>td"),a=r.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),l=i._groups(),c=e(),d=e();for(c=c.add(o.filter(".k-group-cell")),t=0,n=u(i.columns).length;n>t;t++)c=c.add(o.eq(t+l));for(d=d.add(a.filter(".k-group-col")),t=0,n=g(i.columns).length;n>t;t++)d=d.add(a.eq(t+l));c.appendTo(s.find("tr")),d.appendTo(s.find("colgroup")),i.lockedFooter=s.prependTo(r)},_appendLockedColumnHeader:function(t){var n,i,r,o,a,s,l,c,d,h=this,u=this.columns,f=0,p=e(),g=h._hasFilterRow(),m=e(),v=e();for(o=h.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),c=h.thead.find(".k-header:not(.k-group-cell,.k-hierarchy-cell)"),d=h.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),n=0,r=u.length;r>n;n++)u[n].locked&&(u[n].hidden||(p=p.add(o.eq(n-f))),v=v.add(c.eq(n)),m=m.add(d.eq(n))),u[n].hidden&&f++;v.length&&(i='<div class="k-grid-header-locked" style="width:1px"><table'+($t?' cellspacing="0"':"")+"><colgroup/><thead><tr></tr>"+(g?'<tr class="k-filter-row" />':"")+"</thead></table></div>",l=e(i),o=l.find("colgroup"),a=l.find("thead tr:first"),s=l.find(".k-filter-row"),o.append(h.thead.prev().find("col.k-group-col").add(p)),a.append(h.thead.find("tr:first .k-group-cell").add(v)),s.append(h.thead.find(".k-filter-row .k-group-cell").add(m)),this.lockedHeader=l.prependTo(t),this._syncLockedHeaderHeight())},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);N.destroy(e),e.off(ut).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,n,i=this,r=i.columns,o=i._hasDetails()&&r.length,a=i._hasFilterRow(),s="",l=i.table.find(">thead");l.length||(l=e("<thead/>").insertBefore(i.tbody)),i.lockedHeader&&i.thead?(t=i.thead.find("tr:has(th):first").html(""),i._removeLockedContainers()):t=i.element.find("tr:has(th):first"),t.length||(t=l.children().first(),t.length||(t=e("<tr/>"))),a&&(n=e("<tr/>"),n.addClass("k-filter-row"),o&&n.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'),l.append(n)),t.children().length?o&&!t.find(".k-hierarchy-cell")[0]&&t.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'):(o&&(s+='<th class="k-hierarchy-cell">&nbsp;</th>'),s+=i._createHeaderCells(r),t.html(s)),t.attr("role","row").find("th").addClass("k-header"),i.options.scrollable||l.addClass("k-grid-header"),t.find("script").remove().end().prependTo(l),i.thead&&i._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:l.find("th").get()}}),this.angular("compile",function(){return{elements:l.find("th").get(),data:Y(r,function(e){return{column:e}})}}),i.thead=l.attr("role","rowgroup"),i._sortable(),i._filterable(),i._filterRow(),i._scrollable(),i._updateCols(),i._columnMenu(),this.options.scrollable&&u(this.columns).length&&(i._appendLockedColumnHeader(i.thead.closest(".k-grid-header")),i._appendLockedColumnContent(),i.lockedContent.bind("DOMMouseScroll"+ut+" mousewheel"+ut,et(i._wheelScroll,i)),i._applyLockedContainersWidth()),i._resizable(),i._draggable(),i._reorderable(),i.groupable&&i._attachGroupable()},_wheelScroll:function(t){var n,i,r;t.ctrlKey||(n=this.content,this.options.scrollable.virtual&&(n=this.virtualScrollable.verticalScrollbar),i=n.scrollTop(),r=N.wheelDeltaY(t),r&&(t.preventDefault(),e(t.currentTarget).one("wheel"+ut,!1),n.scrollTop(i+-r)))},_isLocked:function(){return null!=this.lockedHeader},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),w(e,g(this.columns),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?w(e,p(this.columns),this._hasDetails(),0):w(e,d(this.columns),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n=this;e=e.toJSON();for(t in e)n.columns.push({field:t});n._thead(),n._templates()}},_rowsHtml:function(e,t){var n,i,r=this,o="",a=t.rowTemplate,s=t.altRowTemplate;for(n=0,i=e.length;i>n;n++)o+=n%2?s(e[n]):a(e[n]),r._data.push(e[n]);return o},_groupRowHtml:function(e,t,n,i,r,o){var a,s,l=this,c="",d=e.field,h=K(l.columns,function(e){return e.field==d})[0]||{},u=h.groupHeaderTemplate,f=(h.title||d)+": "+x(e.value,h.format,h.values),p=Q({},{field:e.field,value:e.value},e.aggregates[e.field]),g=l._groupAggregatesDefaultObject||{},m=r.groupFooterTemplate,v=e.items;if(u&&(f=typeof u===Bt?u(p):N.template(u)(p)),c+=i(t,n,f),e.hasSubgroups)for(a=0,s=v.length;s>a;a++)c+=l._groupRowHtml(v[a],o?t:t-1,n+1,i,r,o);else c+=l._rowsHtml(v,r);return m&&(c+=m(Q(g,e.aggregates))),c},collapseGroup:function(t){t=e(t);var n,i,r,o,a,s=1,l=e();for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td:first").attr("aria-expanded",!1),t=t.nextAll("tr"),r=0,o=t.length;o>r&&(a=t.eq(r),i=a.find(".k-group-cell").length,a.hasClass("k-grouping-row")?s++:a.hasClass("k-group-footer")&&s--,!(n>=i||a.hasClass("k-group-footer")&&0>s));r++)a.hide(),l.eq(r).hide()},expandGroup:function(t){t=e(t);var n,i,r,o,a,s=this,l=e(),c=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td:first").attr("aria-expanded",!0),t=t.nextAll("tr"),o=0,a=t.length;a>o&&(i=t.eq(o),r=i.find(".k-group-cell").length,!(n>=r));o++)r!=n+1||i.hasClass("k-detail-row")||(i.show(),l.eq(o).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&s.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&(i.next().show(),l.eq(o+1).show())),i.hasClass("k-grouping-row")&&c++,i.hasClass("k-group-footer")&&(1==c?(i.show(),l.eq(o).show()):c--)},_updateHeader:function(t){var n=this,i=n._isLocked()?n.lockedHeader:n.thead,r=i.find("tr.k-filter-row").find("th.k-group-cell").length,o=i.find("tr:first").find("th.k-group-cell").length;t>o?e(Array(t-o+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.find("tr:first")):o>t&&i.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>r&&e(Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,n=this;n._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",n.wrapper).add(n.thead.parent()).add(n.table),n._footerWidth=D(t.eq(0)),t.width(n._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",n.wrapper).add(n.lockedHeader.find(">table")).add(n.lockedTable),t.width(D(t.eq(0))))},hideColumn:function(t){var n,i,r,o,a,s,c=this,h=0,u=c.footer||c.wrapper.find(".k-grid-footer"),f=c.columns,p=g(f).length;if(t="number"==typeof t?f[t]:K(f,function(e){return e.field===t})[0],t&&!t.hidden){if(s=Z(t,d(f)),t.hidden=!0,t.attributes=v(t.attributes),t.footerAttributes=v(t.footerAttributes),t.headerAttributes=v(t.headerAttributes),c._templates(),c._updateCols(),c._updateLockedCols(),k(l(e(">table>thead",c.lockedHeader),c.thead,">tr:first-child>th"),s,!1),k(l(e(">table>thead",c.lockedHeader),c.thead,">tr.k-filter-row>th"),s,!1),u[0]&&(c._updateCols(u.find(">.k-grid-footer-wrap>table")),c._updateLockedCols(u.find(">.k-grid-footer-locked>table")),k(u.find(".k-footer-template>td"),s,!1)),c.lockedTable&&p>s?C(c.lockedTable.find(">tbody>tr"),s):C(c.tbody.children(),s-p),c.lockedTable)c._updateTablesWidth(),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight(),c._syncLockedFooterHeight();else{for(r=c.thead.prev().find("col"),i=0,a=r.length;a>i;i+=1){if(o=r[i].style.width,!o||-1!=o.indexOf("%")){h=0;break}h+=parseInt(o,10)}n=e(">.k-grid-header table:first,>.k-grid-footer table:first",c.wrapper).add(c.table),c._footerWidth=null,h&&(n.width(h),c._footerWidth=h),qt.msie&&8==qt.version&&(n.css("display","inline-table"),setTimeout(function(){n.css("display","table")},1))}c.trigger(_t,{column:t})}},showColumn:function(t){var n,i,r,o,a,s,c,d=this,h=d.columns,f=d.footer||d.wrapper.find(".k-grid-footer"),p=u(h).length;if(t="number"==typeof t?h[t]:K(h,function(e){return e.field===t})[0],t&&t.hidden){if(c=Z(t,h),t.hidden=!1,t.attributes=y(t.attributes),t.footerAttributes=y(t.footerAttributes),t.headerAttributes=y(t.headerAttributes),d._templates(),d._updateCols(),d._updateLockedCols(),k(l(e(">table>thead",d.lockedHeader),d.thead,">tr:first-child>th"),c,!0),k(l(e(">table>thead",d.lockedHeader),d.thead,">tr.k-filter-row>th"),c,!0),f[0]&&(d._updateCols(f.find(">.k-grid-footer-wrap>table")),d._updateLockedCols(f.find(">.k-grid-footer-locked>table")),k(f.find(".k-footer-template>td"),c,!0)),d.lockedTable&&p>c?S(d.lockedTable.find(">tbody>tr"),c):S(d.tbody.children(),c-p),d.lockedTable)d._updateTablesWidth(),d._applyLockedContainersWidth(),d._syncLockedContentHeight(),d._syncLockedHeaderHeight();else if(r=e(">.k-grid-header table:first,>.k-grid-footer table:first",d.wrapper).add(d.table),t.width){for(o=0,s=d.thead.prev().find("col"),n=0,i=s.length;i>n;n+=1){if(a=s[n].style.width,a.indexOf("%")>-1){o=0;break}o+=parseInt(a,10)}d._footerWidth=null,o&&(r.width(o),d._footerWidth=o)}else r.width("");d.trigger(bt,{column:t})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),N.ui.progress(t,e)},_resize:function(){this.content&&(this._setContentHeight(),this._setContentWidth())},_isActiveInTable:function(){var t=j();return this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t))},refresh:function(t){var n,i=this,r=i.dataSource.view(),o=i.options.navigatable,a=e(i.current()),s=!1,l=(i.dataSource.group()||[]).length,c=l+d(i.columns).length;t&&"itemchange"===t.action&&i.editable||(t=t||{},i.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(i._angularItems("cleanup"),o&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data("kendoWindow"))&&(s=a.is("th"),n=0,s&&(n=i.thead.find("th:not(.k-group-cell)").index(a))),i._destroyEditable(),i._progress(!1),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(r[0],l)),c=l+i.columns.length),i._group=l>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._updateHeader(l),i._group=l>0),i._renderContent(r,c,l),i._renderLockedContent(r,c,l),i._footer(),i._setContentHeight(),i._setContentWidth(),i.lockedTable&&(i.options.scrollable.virtual?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.content.trigger("scroll")),n>=0&&(i._removeCurrent(),i.current(s?i.thead.find("th:not(.k-group-cell)").eq(n):i.table.add(i.lockedTable).find(dt).first()),i._current&&E(i._current.closest("table")[0],!0)),i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._angularItems("compile"),i.trigger(kt)))},_renderContent:function(e,t,n){var i,r,o=this,s="",l=null!=o.lockedContent,c={rowTemplate:o.rowTemplate,altRowTemplate:o.altRowTemplate,groupFooterTemplate:o.groupFooterTemplate};if(t=l?t-g(o.columns).length:t,n>0)for(t=l?t-n:t,o.detailTemplate&&t++,o.groupFooterTemplate&&(o._groupAggregatesDefaultObject=a(o.dataSource.aggregate())),i=0,r=e.length;r>i;i++)s+=o._groupRowHtml(e[i],t,0,l?O:F,c,l);else s+=o._rowsHtml(e,c);o.tbody=m(o.tbody,o.table,s)},_renderLockedContent:function(e,t,n){var i,r,o,a="",s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){if(o=this.lockedTable,n>0)for(t-=p(this.columns).length,i=0,r=e.length;r>i;i++)a+=this._groupRowHtml(e[i],t,0,F,s);else a=this._rowsHtml(e,s);m(o.children("tbody"),o,a),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var n,i,r,o,a=e[0].rows,s=a.length,l=t[0].rows,c=e.add(t),d=c.length,h=[];for(n=0;s>n&&l[n];n++)a[n].style.height&&(a[n].style.height=l[n].style.height=""),i=a[n].offsetHeight,r=l[n].offsetHeight,o=0,i>r?o=i:r>i&&(o=r),h.push(o);for(n=0;d>n;n++)c[n].style.display="none";for(n=0;s>n;n++)h[n]&&(a[n].style.height=l[n].style.height=h[n]+"px");for(n=0;d>n;n++)c[n].style.display=""}});H.plugin(Xt),H.plugin(Yt)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});